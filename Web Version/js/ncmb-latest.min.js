/*!
 * NCMB JavaScript SDK
 * Version: 1.2.2
 * Build: 7.8.2014
 * http://www.nifty.com
 *
 * Copyright (c) 2014, NIFTY Corporation. All rights reserved.
 * The NCMB JavaScript SDK is freely distributable under the MIT license.
 *
 * Created based on the following Javascript libraries.
 * 
 * Parse JavaScript SDK v1.2.8
 * Copyright 2013 Parse, Inc.
 * The Parse JavaScript SDK is freely distributable under the MIT license.
 * 
 * Backbone.js v1.0.0
 * Copyright (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * Backbone may be freely distributed under the MIT license.
 *
 * Includes: Underscore.js v1.4.4
 * Copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * The Underscore is freely distributable under the MIT license.
 * 
 * Includes: CryptoJS v3.0.2 v3.1.2
 * Copyright (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, 
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. 
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH 
 * THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. 
 */
(function(a){a.NCMB=a.NCMB||{};a.NCMB.VERSION="js.1.2.2"}(this));(function(){var x=this;var l=x._;var E={};var D=Array.prototype,f=Object.prototype,s=Function.prototype;var H=D.push,p=D.slice,z=D.concat,d=f.toString,k=f.hasOwnProperty;var L=D.forEach,r=D.map,F=D.reduce,c=D.reduceRight,b=D.filter,C=D.every,q=D.some,o=D.indexOf,m=D.lastIndexOf,v=Array.isArray,e=Object.keys,G=s.bind;var M=function(N){if(N instanceof M){return N}if(!(this instanceof M)){return new M(N)}this._wrapped=N};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=M}exports._=M}else{x._=M}M.VERSION="1.4.4";var I=M.each=M.forEach=function(S,R,Q){if(S==null){return}if(L&&S.forEach===L){S.forEach(R,Q)}else{if(S.length===+S.length){for(var P=0,N=S.length;P<N;P++){if(R.call(Q,S[P],P,S)===E){return}}}else{for(var O in S){if(M.has(S,O)){if(R.call(Q,S[O],O,S)===E){return}}}}}};M.map=M.collect=function(Q,P,O){var N=[];if(Q==null){return N}if(r&&Q.map===r){return Q.map(P,O)}I(Q,function(T,R,S){N[N.length]=P.call(O,T,R,S)});return N};var g="Reduce of empty array with no initial value";M.reduce=M.foldl=M.inject=function(R,Q,N,P){var O=arguments.length>2;if(R==null){R=[]}if(F&&R.reduce===F){if(P){Q=M.bind(Q,P)}return O?R.reduce(Q,N):R.reduce(Q)}I(R,function(U,S,T){if(!O){N=U;O=true}else{N=Q.call(P,N,U,S,T)}});if(!O){throw new TypeError(g)}return N};M.reduceRight=M.foldr=function(T,Q,N,P){var O=arguments.length>2;if(T==null){T=[]}if(c&&T.reduceRight===c){if(P){Q=M.bind(Q,P)}return O?T.reduceRight(Q,N):T.reduceRight(Q)}var S=T.length;if(S!==+S){var R=M.keys(T);S=R.length}I(T,function(W,U,V){U=R?R[--S]:--S;if(!O){N=T[U];O=true}else{N=Q.call(P,N,T[U],U,V)}});if(!O){throw new TypeError(g)}return N};M.find=M.detect=function(Q,P,O){var N;B(Q,function(T,R,S){if(P.call(O,T,R,S)){N=T;return true}});return N};M.filter=M.select=function(Q,P,O){var N=[];if(Q==null){return N}if(b&&Q.filter===b){return Q.filter(P,O)}I(Q,function(T,R,S){if(P.call(O,T,R,S)){N[N.length]=T}});return N};M.reject=function(P,O,N){return M.filter(P,function(S,Q,R){return !O.call(N,S,Q,R)},N)};M.every=M.all=function(Q,P,O){P||(P=M.identity);var N=true;if(Q==null){return N}if(C&&Q.every===C){return Q.every(P,O)}I(Q,function(T,R,S){if(!(N=N&&P.call(O,T,R,S))){return E}});return !!N};var B=M.some=M.any=function(Q,P,O){P||(P=M.identity);var N=false;if(Q==null){return N}if(q&&Q.some===q){return Q.some(P,O)}I(Q,function(T,R,S){if(N||(N=P.call(O,T,R,S))){return E}});return !!N};M.contains=M.include=function(O,N){if(O==null){return false}if(o&&O.indexOf===o){return O.indexOf(N)!=-1}return B(O,function(P){return P===N})};M.invoke=function(P,Q){var N=p.call(arguments,2);var O=M.isFunction(Q);return M.map(P,function(R){return(O?Q:R[Q]).apply(R,N)})};M.pluck=function(O,N){return M.map(O,function(P){return P[N]})};M.where=function(O,N,P){if(M.isEmpty(N)){return P?null:[]}return M[P?"find":"filter"](O,function(R){for(var Q in N){if(N[Q]!==R[Q]){return false}}return true})};M.findWhere=function(O,N){return M.where(O,N,true)};M.max=function(Q,P,O){if(!P&&M.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.max.apply(Math,Q)}if(!P&&M.isEmpty(Q)){return -Infinity}var N={computed:-Infinity,value:-Infinity};I(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S>=N.computed&&(N={value:U,computed:S})});return N.value};M.min=function(Q,P,O){if(!P&&M.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.min.apply(Math,Q)}if(!P&&M.isEmpty(Q)){return Infinity}var N={computed:Infinity,value:Infinity};I(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S<N.computed&&(N={value:U,computed:S})});return N.value};M.shuffle=function(Q){var P;var O=0;var N=[];I(Q,function(R){P=M.random(O++);N[O-1]=N[P];N[P]=R});return N};var a=function(N){return M.isFunction(N)?N:function(O){return O[N]}};M.sortBy=function(Q,P,N){var O=a(P);return M.pluck(M.map(Q,function(T,R,S){return{value:T,index:R,criteria:O.call(N,T,R,S)}}).sort(function(U,T){var S=U.criteria;var R=T.criteria;if(S!==R){if(S>R||S===void 0){return 1}if(S<R||R===void 0){return -1}}return U.index<T.index?-1:1}),"value")};var u=function(S,R,O,Q){var N={};var P=a(R||M.identity);I(S,function(V,T){var U=P.call(O,V,T,S);Q(N,U,V)});return N};M.groupBy=function(P,O,N){return u(P,O,N,function(Q,R,S){(M.has(Q,R)?Q[R]:(Q[R]=[])).push(S)})};M.countBy=function(P,O,N){return u(P,O,N,function(Q,R){if(!M.has(Q,R)){Q[R]=0}Q[R]++})};M.sortedIndex=function(U,T,Q,P){Q=Q==null?M.identity:a(Q);var S=Q.call(P,T);var N=0,R=U.length;while(N<R){var O=(N+R)>>>1;Q.call(P,U[O])<S?N=O+1:R=O}return N};M.toArray=function(N){if(!N){return[]}if(M.isArray(N)){return p.call(N)}if(N.length===+N.length){return M.map(N,M.identity)}return M.values(N)};M.size=function(N){if(N==null){return 0}return(N.length===+N.length)?N.length:M.keys(N).length};M.first=M.head=M.take=function(P,O,N){if(P==null){return void 0}return(O!=null)&&!N?p.call(P,0,O):P[0]};M.initial=function(P,O,N){return p.call(P,0,P.length-((O==null)||N?1:O))};M.last=function(P,O,N){if(P==null){return void 0}if((O!=null)&&!N){return p.call(P,Math.max(P.length-O,0))}else{return P[P.length-1]}};M.rest=M.tail=M.drop=function(P,O,N){return p.call(P,(O==null)||N?1:O)};M.compact=function(N){return M.filter(N,M.identity)};var y=function(O,P,N){I(O,function(Q){if(M.isArray(Q)){P?H.apply(N,Q):y(Q,P,N)}else{N.push(Q)}});return N};M.flatten=function(O,N){return y(O,N,[])};M.without=function(N){return M.difference(N,p.call(arguments,1))};M.uniq=M.unique=function(T,S,R,Q){if(M.isFunction(S)){Q=R;R=S;S=false}var O=R?M.map(T,R,Q):T;var P=[];var N=[];I(O,function(V,U){if(S?(!U||N[N.length-1]!==V):!M.contains(N,V)){N.push(V);P.push(T[U])}});return P};M.union=function(){return M.uniq(z.apply(D,arguments))};M.intersection=function(O){var N=p.call(arguments,1);return M.filter(M.uniq(O),function(P){return M.every(N,function(Q){return M.indexOf(Q,P)>=0})})};M.difference=function(O){var N=z.apply(D,p.call(arguments,1));return M.filter(O,function(P){return !M.contains(N,P)})};M.zip=function(){var N=p.call(arguments);var Q=M.max(M.pluck(N,"length"));var P=new Array(Q);for(var O=0;O<Q;O++){P[O]=M.pluck(N,""+O)}return P};M.object=function(R,P){if(R==null){return{}}var N={};for(var Q=0,O=R.length;Q<O;Q++){if(P){N[R[Q]]=P[Q]}else{N[R[Q][0]]=R[Q][1]}}return N};M.indexOf=function(R,P,Q){if(R==null){return -1}var O=0,N=R.length;if(Q){if(typeof Q=="number"){O=(Q<0?Math.max(0,N+Q):Q)}else{O=M.sortedIndex(R,P);return R[O]===P?O:-1}}if(o&&R.indexOf===o){return R.indexOf(P,Q)}for(;O<N;O++){if(R[O]===P){return O}}return -1};M.lastIndexOf=function(R,P,Q){if(R==null){return -1}var N=Q!=null;if(m&&R.lastIndexOf===m){return N?R.lastIndexOf(P,Q):R.lastIndexOf(P)}var O=(N?Q:R.length);while(O--){if(R[O]===P){return O}}return -1};M.range=function(S,Q,R){if(arguments.length<=1){Q=S||0;S=0}R=arguments[2]||1;var O=Math.max(Math.ceil((Q-S)/R),0);var N=0;var P=new Array(O);while(N<O){P[N++]=S;S+=R}return P};M.bind=function(P,O){if(P.bind===G&&G){return G.apply(P,p.call(arguments,1))}var N=p.call(arguments,2);return function(){return P.apply(O,N.concat(p.call(arguments)))}};M.partial=function(O){var N=p.call(arguments,1);return function(){return O.apply(this,N.concat(p.call(arguments)))}};M.bindAll=function(O){var N=p.call(arguments,1);if(N.length===0){N=M.functions(O)}I(N,function(P){O[P]=M.bind(O[P],O)});return O};M.memoize=function(P,O){var N={};O||(O=M.identity);return function(){var Q=O.apply(this,arguments);return M.has(N,Q)?N[Q]:(N[Q]=P.apply(this,arguments))}};M.delay=function(O,P){var N=p.call(arguments,2);return setTimeout(function(){return O.apply(null,N)},P)};M.defer=function(N){return M.delay.apply(M,[N,1].concat(p.call(arguments,1)))};M.throttle=function(S,U){var Q,P,T,N;var R=0;var O=function(){R=new Date;T=null;N=S.apply(Q,P)};return function(){var V=new Date;var W=U-(V-R);Q=this;P=arguments;if(W<=0){clearTimeout(T);T=null;R=V;N=S.apply(Q,P)}else{if(!T){T=setTimeout(O,W)}}return N}};M.debounce=function(P,R,O){var Q,N;return function(){var V=this,U=arguments;var T=function(){Q=null;if(!O){N=P.apply(V,U)}};var S=O&&!Q;clearTimeout(Q);Q=setTimeout(T,R);if(S){N=P.apply(V,U)}return N}};M.once=function(P){var N=false,O;return function(){if(N){return O}N=true;O=P.apply(this,arguments);P=null;return O}};M.wrap=function(N,O){return function(){var P=[N];H.apply(P,arguments);return O.apply(this,P)}};M.compose=function(){var N=arguments;return function(){var O=arguments;for(var P=N.length-1;P>=0;P--){O=[N[P].apply(this,O)]}return O[0]}};M.after=function(O,N){if(O<=0){return N()}return function(){if(--O<1){return N.apply(this,arguments)}}};M.keys=e||function(P){if(P!==Object(P)){throw new TypeError("Invalid object")}var O=[];for(var N in P){if(M.has(P,N)){O[O.length]=N}}return O};M.values=function(P){var N=[];for(var O in P){if(M.has(P,O)){N.push(P[O])}}return N};M.pairs=function(P){var O=[];for(var N in P){if(M.has(P,N)){O.push([N,P[N]])}}return O};M.invert=function(P){var N={};for(var O in P){if(M.has(P,O)){N[P[O]]=O}}return N};M.functions=M.methods=function(P){var O=[];for(var N in P){if(M.isFunction(P[N])){O.push(N)}}return O.sort()};M.extend=function(N){I(p.call(arguments,1),function(O){if(O){for(var P in O){N[P]=O[P]}}});return N};M.pick=function(O){var P={};var N=z.apply(D,p.call(arguments,1));I(N,function(Q){if(Q in O){P[Q]=O[Q]}});return P};M.omit=function(P){var Q={};var O=z.apply(D,p.call(arguments,1));for(var N in P){if(!M.contains(O,N)){Q[N]=P[N]}}return Q};M.defaults=function(N){I(p.call(arguments,1),function(O){if(O){for(var P in O){if(N[P]==null){N[P]=O[P]}}}});return N};M.clone=function(N){if(!M.isObject(N)){return N}return M.isArray(N)?N.slice():M.extend({},N)};M.tap=function(O,N){N(O);return O};var J=function(U,T,O,P){if(U===T){return U!==0||1/U==1/T}if(U==null||T==null){return U===T}if(U instanceof M){U=U._wrapped}if(T instanceof M){T=T._wrapped}var R=d.call(U);if(R!=d.call(T)){return false}switch(R){case"[object String]":return U==String(T);case"[object Number]":return U!=+U?T!=+T:(U==0?1/U==1/T:U==+T);case"[object Date]":case"[object Boolean]":return +U==+T;case"[object RegExp]":return U.source==T.source&&U.global==T.global&&U.multiline==T.multiline&&U.ignoreCase==T.ignoreCase}if(typeof U!="object"||typeof T!="object"){return false}var N=O.length;while(N--){if(O[N]==U){return P[N]==T}}O.push(U);P.push(T);var W=0,X=true;if(R=="[object Array]"){W=U.length;X=W==T.length;if(X){while(W--){if(!(X=J(U[W],T[W],O,P))){break}}}}else{var S=U.constructor,Q=T.constructor;if(S!==Q&&!(M.isFunction(S)&&(S instanceof S)&&M.isFunction(Q)&&(Q instanceof Q))){return false}for(var V in U){if(M.has(U,V)){W++;if(!(X=M.has(T,V)&&J(U[V],T[V],O,P))){break}}}if(X){for(V in T){if(M.has(T,V)&&!(W--)){break}}X=!W}}O.pop();P.pop();return X};M.isEqual=function(O,N){return J(O,N,[],[])};M.isEmpty=function(O){if(O==null){return true}if(M.isArray(O)||M.isString(O)){return O.length===0}for(var N in O){if(M.has(O,N)){return false}}return true};M.isElement=function(N){return !!(N&&N.nodeType===1)};M.isArray=v||function(N){return d.call(N)=="[object Array]"};M.isObject=function(N){return N===Object(N)};I(["Arguments","Function","String","Number","Date","RegExp"],function(N){M["is"+N]=function(O){return d.call(O)=="[object "+N+"]"}});if(!M.isArguments(arguments)){M.isArguments=function(N){return !!(N&&M.has(N,"callee"))}}if(typeof(/./)!=="function"){M.isFunction=function(N){return typeof N==="function"}}M.isFinite=function(N){return isFinite(N)&&!isNaN(NCMBFloat(N))};M.isNaN=function(N){return M.isNumber(N)&&N!=+N};M.isBoolean=function(N){return N===true||N===false||d.call(N)=="[object Boolean]"};M.isNull=function(N){return N===null};M.isUndefined=function(N){return N===void 0};M.has=function(O,N){return k.call(O,N)};M.noConflict=function(){x._=l;return this};M.identity=function(N){return N};M.times=function(R,Q,P){var N=Array(R);for(var O=0;O<R;O++){N[O]=Q.call(P,O)}return N};M.random=function(O,N){if(N==null){N=O;O=0}return O+Math.floor(Math.random()*(N-O+1))};var n={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};n.unescape=M.invert(n.escape);var K={escape:new RegExp("["+M.keys(n.escape).join("")+"]","g"),unescape:new RegExp("("+M.keys(n.unescape).join("|")+")","g")};M.each(["escape","unescape"],function(N){M[N]=function(O){if(O==null){return""}return(""+O).replace(K[N],function(P){return n[N][P]})}});M.result=function(N,P){if(N==null){return null}var O=N[P];return M.isFunction(O)?O.call(N):O};M.mixin=function(N){I(M.functions(N),function(O){var P=M[O]=N[O];M.prototype[O]=function(){var Q=[this._wrapped];H.apply(Q,arguments);return t.call(this,P.apply(M,Q))}})};var A=0;M.uniqueId=function(N){var O=++A+"";return N?N+O:O};M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var w=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var j=/\\|'|\r|\n|\t|\u2028|\u2029/g;M.template=function(V,Q,P){var O;P=M.defaults({},P,M.templateSettings);var R=new RegExp([(P.escape||w).source,(P.interpolate||w).source,(P.evaluate||w).source].join("|")+"|$","g");var S=0;var N="__p+='";V.replace(R,function(X,Y,W,aa,Z){N+=V.slice(S,Z).replace(j,function(ab){return"\\"+h[ab]});if(Y){N+="'+\n((__t=("+Y+"))==null?'':_.escape(__t))+\n'"}if(W){N+="'+\n((__t=("+W+"))==null?'':__t)+\n'"}if(aa){N+="';\n"+aa+"\n__p+='"}S=Z+X.length;return X});N+="';\n";if(!P.variable){N="with(obj||{}){\n"+N+"}\n"}N="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+N+"return __p;\n";try{O=new Function(P.variable||"obj","_",N)}catch(T){T.source=N;throw T}if(Q){return O(Q,M)}var U=function(W){return O.call(this,W,M)};U.source="function("+(P.variable||"obj")+"){\n"+N+"}";return U};M.chain=function(N){return M(N).chain()};var t=function(N){return this._chain?M(N).chain():N};M.mixin(M);I(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var O=D[N];M.prototype[N]=function(){var P=this._wrapped;O.apply(P,arguments);if((N=="shift"||N=="splice")&&P.length===0){delete P[0]}return t.call(this,P)}});I(["concat","join","slice"],function(N){var O=D[N];M.prototype[N]=function(){return t.call(this,O.apply(this._wrapped,arguments))}});M.extend(M.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);var CryptoJS=CryptoJS||function(t,s){var w={},v=w.lib={},n=v.Base=function(){function b(){}return{extend:function(e){b.prototype=this;var f=new b;e&&f.mixIn(e);f.$super=this;return f},create:function(){var e=this.extend();e.init.apply(e,arguments);return e},init:function(){},mixIn:function(e){for(var f in e){e.hasOwnProperty(f)&&(this[f]=e[f])}e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),p=v.WordArray=n.extend({init:function(b,e){b=this.words=b||[];this.sigBytes=e!=s?e:4*b.length},toString:function(b){return(b||j).stringify(this)},concat:function(f){var g=this.words,h=f.words,k=this.sigBytes,f=f.sigBytes;this.clamp();if(k%4){for(var e=0;e<f;e++){g[k+e>>>2]|=(h[e>>>2]>>>24-8*(e%4)&255)<<24-8*((k+e)%4)}}else{if(65535<h.length){for(e=0;e<f;e+=4){g[k+e>>>2]=h[e>>>2]}}else{g.push.apply(g,h)}}this.sigBytes+=f;return this},clamp:function(){var f=this.words,e=this.sigBytes;f[e>>>2]&=4294967295<<32-8*(e%4);f.length=t.ceil(e/4)},clone:function(){var b=n.clone.call(this);b.words=this.words.slice(0);return b},random:function(f){for(var e=[],g=0;g<f;g+=4){e.push(4294967296*t.random()|0)}return p.create(e,f)}}),d=w.enc={},j=d.Hex={stringify:function(g){for(var f=g.words,g=g.sigBytes,k=[],l=0;l<g;l++){var h=f[l>>>2]>>>24-8*(l%4)&255;k.push((h>>>4).toString(16));k.push((h&15).toString(16))}return k.join("")},parse:function(f){for(var e=f.length,g=[],h=0;h<e;h+=2){g[h>>>3]|=parseInt(f.substr(h,2),16)<<24-4*(h%8)}return p.create(g,e/2)}},c=d.Latin1={stringify:function(f){for(var e=f.words,f=f.sigBytes,g=[],h=0;h<f;h++){g.push(String.fromCharCode(e[h>>>2]>>>24-8*(h%4)&255))}return g.join("")},parse:function(f){for(var e=f.length,g=[],h=0;h<e;h++){g[h>>>2]|=(f.charCodeAt(h)&255)<<24-8*(h%4)}return p.create(g,e)}},a=d.Utf8={stringify:function(f){try{return decodeURIComponent(escape(c.stringify(f)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(b){return c.parse(unescape(encodeURIComponent(b)))}},x=v.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=p.create();this._nDataBytes=0},_append:function(b){"string"==typeof b&&(b=a.parse(b));this._data.concat(b);this._nDataBytes+=b.sigBytes},_process:function(k){var h=this._data,q=h.words,r=h.sigBytes,o=this.blockSize,l=r/(4*o),l=k?t.ceil(l):t.max((l|0)-this._minBufferSize,0),k=l*o,r=t.min(4*k,r);if(k){for(var m=0;m<k;m+=o){this._doProcessBlock(q,m)}m=q.splice(0,k);h.sigBytes-=r}return p.create(m,r)},clone:function(){var b=n.clone.call(this);b._data=this._data.clone();return b},_minBufferSize:0});v.Hasher=x.extend({init:function(){this.reset()},reset:function(){x.reset.call(this);this._doReset()},update:function(b){this._append(b);this._process();return this},finalize:function(b){b&&this._append(b);this._doFinalize();return this._hash},clone:function(){var b=x.clone.call(this);b._hash=this._hash.clone();return b},blockSize:16,_createHelper:function(b){return function(e,f){return b.create(f).finalize(e)}},_createHmacHelper:function(b){return function(e,f){return u.HMAC.create(b,f).finalize(e)}}});var u=w.algo={};return w}(Math);(function(g){var d=CryptoJS,n=d.lib,j=n.WordArray,n=n.Hasher,b=d.algo,c=[],p=[];(function(){function m(f){for(var e=g.sqrt(f),o=2;o<=e;o++){if(!(f%o)){return !1}}return !0}function l(e){return 4294967296*(e-(e|0))|0}for(var h=2,k=0;64>k;){m(h)&&(8>k&&(c[k]=l(g.pow(h,0.5))),p[k]=l(g.pow(h,1/3)),k++),h++}})();var a=[],b=b.SHA256=n.extend({_doReset:function(){this._hash=j.create(c.slice(0))},_doProcessBlock:function(x,w){for(var A=this._hash.words,v=A[0],B=A[1],s=A[2],y=A[3],z=A[4],u=A[5],q=A[6],r=A[7],o=0;64>o;o++){if(16>o){a[o]=x[w+o]|0}else{var t=a[o-15],m=a[o-2];a[o]=((t<<25|t>>>7)^(t<<14|t>>>18)^t>>>3)+a[o-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+a[o-16]}t=r+((z<<26|z>>>6)^(z<<21|z>>>11)^(z<<7|z>>>25))+(z&u^~z&q)+p[o]+a[o];m=((v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22))+(v&B^v&s^B&s);r=q;q=u;u=z;z=y+t|0;y=s;s=B;B=v;v=t+m|0}A[0]=A[0]+v|0;A[1]=A[1]+B|0;A[2]=A[2]+s|0;A[3]=A[3]+y|0;A[4]=A[4]+z|0;A[5]=A[5]+u|0;A[6]=A[6]+q|0;A[7]=A[7]+r|0},_doFinalize:function(){var m=this._data,l=m.words,h=8*this._nDataBytes,k=8*m.sigBytes;l[k>>>5]|=128<<24-k%32;l[(k+64>>>9<<4)+15]=h;m.sigBytes=4*l.length;this._process()}});d.SHA256=n._createHelper(b);d.HmacSHA256=n._createHmacHelper(b)})(Math);(function(){var b=CryptoJS,a=b.enc.Utf8;b.algo.HMAC=b.lib.Base.extend({init:function(s,p){s=this._hasher=s.create();"string"==typeof p&&(p=a.parse(p));var n=s.blockSize,l=4*n;p.sigBytes>l&&(p=s.finalize(p));for(var g=this._oKey=p.clone(),j=this._iKey=p.clone(),d=g.words,c=j.words,t=0;t<n;t++){d[t]^=1549556828,c[t]^=909522486}g.sigBytes=j.sigBytes=l;this.reset()},reset:function(){var c=this._hasher;c.reset();c.update(this._iKey)},update:function(c){this._hasher.update(c);return this},finalize:function(d){var c=this._hasher,d=c.finalize(d);c.reset();return c.finalize(this._oKey.clone().concat(d))}})})();(function(){var e=CryptoJS;var a=e.lib;var b=a.WordArray;var d=e.enc;var c=d.Base64={stringify:function(l){var n=l.words;var p=l.sigBytes;var g=this._map;l.clamp();var m=[];for(var k=0;k<p;k+=3){var s=(n[k>>>2]>>>(24-(k%4)*8))&255;var q=(n[(k+1)>>>2]>>>(24-((k+1)%4)*8))&255;var o=(n[(k+2)>>>2]>>>(24-((k+2)%4)*8))&255;var r=(s<<16)|(q<<8)|o;for(var h=0;(h<4)&&(k+h*0.75<p);h++){m.push(g.charAt((r>>>(6*(3-h)))&63))}}var f=g.charAt(64);if(f){while(m.length%4){m.push(f)}}return m.join("")},parse:function(o){var m=o.length;var g=this._map;var f=g.charAt(64);if(f){var p=o.indexOf(f);if(p!=-1){m=p}}var n=[];var l=0;for(var k=0;k<m;k++){if(k%4){var j=g.indexOf(o.charAt(k-1))<<((k%4)*2);var h=g.indexOf(o.charAt(k))>>>(6-(k%4)*2);n[l>>>2]|=(j|h)<<(24-(l%4)*8);l++}}return b.create(n,l)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}());(function(a){a.NCMB=a.NCMB||{};var b=a.NCMB;b._=_.noConflict();if(typeof(localStorage)!=="undefined"){b.localStorage=localStorage}if(typeof(XMLHttpRequest)!=="undefined"){b.XMLHttpRequest=XMLHttpRequest}if(typeof($)!=="undefined"){b.$=$}var c=function(){};var d=function(f,e,g){var h;if(e&&e.hasOwnProperty("constructor")){h=e.constructor}else{h=function(){f.apply(this,arguments)}}b._.extend(h,f);c.prototype=f.prototype;h.prototype=new c();if(e){b._.extend(h.prototype,e)}if(g){b._.extend(h,g)}h.prototype.constructor=h;h.__super__=f.prototype;return h};b.serverURL="https://mb.api.cloud.nifty.com/2013-09-01/";b.initialize=function(e,f){b._initialize(e,f)};b._initialize=function(e,f){b.applicationKey=e;b.clientKey=f};b._getNCMBPath=function(e){if(!b.applicationKey){throw"You need to call NCMB.initialize before using NCMB."}if(!e){e=""}if(!b._.isString(e)){throw"Tried to get a localStorage path that wasn't a String."}if(e[0]==="/"){e=e.substring(1)}return"NCMB/"+b.applicationKey+"/"+e};b._NCMBDate=function(e){var m=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$");var k=m.exec(e);if(!k){return null}var n=k[1]||0;var l=(k[2]||1)-1;var o=k[3]||0;var h=k[4]||0;var g=k[5]||0;var f=k[6]||0;var j=k[8]||0;return new Date(Date.UTC(n,l,o,h,g,f,j))};b._createSignature=function(F,m,e,s,o,n){var A="";var j=b.applicationKey;var x=n;var w=b.clientKey;var y=o;var v=encodeURI(s);var g=v.substring(v.lastIndexOf("//")+2);var f=g.substring(0,g.indexOf("/"));var p=v.indexOf("?");var r="";var B={};if(p==-1){r=v.substring(v.lastIndexOf(f)+f.length)}else{var l=v.substring(p+1);r=v.substring(v.lastIndexOf(f)+f.length,p);g=l.split("&");for(var D=0;D<g.length;D++){p=g[D].indexOf("=");B[g[D].substring(0,p)]=g[D].substring(p+1)}}B.SignatureMethod="HmacSHA256";B.SignatureVersion="2";B["X-NCMB-Application-Key"]=j;B["X-NCMB-Timestamp"]=x;var u={};var z=[];var C,D,E;for(C in B){if(B.hasOwnProperty(C)){z.push(C)}}z.sort();E=z.length;for(D=0;D<E;D++){C=z[D];u[C]=B[C]}var q="";for(C in u){if(u.hasOwnProperty(C)){if(q!=""){q+="&"}q=q+C+"="+u[C]}}var t=y+"\n"+f+"\n"+r+"\n"+q;var h=CryptoJS.HmacSHA256(t,w);var A=CryptoJS.enc.Base64.stringify(h);return A};b._ajax=function(q,o,e,g,l,h,n,r,p){var u={success:r,error:p};var t=new b.Promise();var m=false;var s=new b.XMLHttpRequest();s.onreadystatechange=function(){if(s.readyState===4){if(m){return}m=true;if(s.status>=200&&s.status<300){var v;try{if(s.responseText){if(q!="files"||e!="GET"||o==null){v=JSON.parse(s.responseText)}else{v=s.responseText}}else{v={}}}catch(w){t.reject(w)}if(v){t.resolve(v,s.status,s)}}else{t.reject(s)}}};s.open(e,g,true);if(q=="files"&&e=="GET"&&o!=null){s.overrideMimeType("text/plain; charset=x-user-defined")}s.setRequestHeader("X-NCMB-Application-Key",b.applicationKey);s.setRequestHeader("X-NCMB-Timestamp",n);s.setRequestHeader("X-NCMB-Signature",h);var k=b.User.current();if(k){var f=k._sessionToken;s.setRequestHeader("X-NCMB-Apps-Session-Token",f)}if(q=="files"&&e=="POST"){var j=new FormData();j.append("file",l.file);j.append("acl",l.acl);s.send(j)}else{l=JSON.stringify(l);s.setRequestHeader("Content-Type","application/json");s.send(l)}return t._thenRunCallbacks(u)};b._extend=function(e,f){var g=d(this,e,f);g.extend=this.extend;return g};b._request=function(o,l,m,e,h){if(!b.applicationKey){throw"You must specify your applicationKey using NCMB.initialize"}if(!b.clientKey){throw"You must specify a key using NCMB.initialize"}if(l=="file"&&o=="classes"){o="files";l=null}if(l=="user"&&o=="classes"){o="users";l=null}if(l=="push"&&o=="classes"){o="push";l=null}if(l=="role"&&o=="classes"){o="roles";l=null}if(l=="installation"&&o=="classes"){o="installations";l=null}if(o!=="classes"&&o!=="batch"&&o!=="users"&&o!=="files"&&o!=="requestPasswordReset"&&o!=="mailAddressConfirm"&&o!=="login"&&o!=="logout"&&o!=="push"&&o!=="roles"&&o!=="installations"){throw"Bad route: '"+o+"'."}var f=b.serverURL;if(f.charAt(f.length-1)!=="/"){f+="/"}f+=o;if(l){f+="/"+l}if(m){f+="/"+m}if(h){if(h.where||h.include||h.order||h.skip||h.count||h.limit){f+="?"}if(o=="login"){if(h.userName||h.password){f+="?"}}if(h.where){if(f.charAt(f.length-1)=="?"){f+="where="+JSON.stringify(h.where)}else{f+="&where="+JSON.stringify(h.where)}delete h.where}if(h.include){if(f.charAt(f.length-1)=="?"){f+="include="+h.include}else{f+="&include="+h.include}delete h.include}if(h.order){if(f.charAt(f.length-1)=="?"){f+="order="+h.order}else{f+="&order="+h.order}delete h.order}if(h.skip){if(f.charAt(f.length-1)=="?"){f+="skip="+JSON.stringify(h.skip)}else{f+="&skip="+JSON.stringify(h.skip)}delete h.skip}if(h.count){if(f.charAt(f.length-1)=="?"){f+="count="+JSON.stringify(h.count)}else{f+="&count="+JSON.stringify(h.count)}delete h.count}if(h.limit){if(f.charAt(f.length-1)=="?"){f+="limit="+JSON.stringify(h.limit)}else{f+="&limit="+JSON.stringify(h.limit)}delete h.limit}if(o=="login"){if(h.userName){if(f.charAt(f.length-1)=="?"){f+="userName="+h.userName}else{f+="&userName="+h.userName}delete h.userName}if(h.password){if(f.charAt(f.length-1)=="?"){f+="password="+h.password}else{f+="&password="+h.password}delete h.password}}}var g=new Date();if(!Date.prototype.toISOString){(function(){function p(s){var q=String(s);if(q.length===1){q="0"+q}return q}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+p(this.getUTCMonth()+1)+"-"+p(this.getUTCDate())+"T"+p(this.getUTCHours())+":"+p(this.getUTCMinutes())+":"+p(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}())}var n=g.toISOString();while(n.indexOf(":")>-1){n=n.replace(":","%3A")}var k=n;signature=b._createSignature(o,l,m,f,e,k);var j=h;return b._ajax(o,l,e,f,j,signature,k).then(null,function(p){var r;if(p&&p.responseText){try{var q=JSON.parse(p.responseText);if(q){r=new b.Error(q.code,q.error)}}catch(t){}}r=r||new b.Error(-1,p.responseText);var s=b.User.current();if(r.code=="E401001"){if(s._sessionToken!=null){b.User.logOut()}}return b.Promise.error(r)})};b._getValue=function(e,f){if(!(e&&e[f])){return null}return b._.isFunction(e[f])?e[f]():e[f]};b._encode=function(j,h,g){var f=b._;if(j instanceof b.Object){if(g){throw"NCMB.Objects not allowed here"}if(!h||f.include(h,j)||!j._hasData){return j._toPointer()}if(!j.dirty()){h=h.concat(j);return b._encode(j._toFullJSON(h),h,g)}throw"Tried to save an object with a pointer to a new, unsaved object."}if(j instanceof b.ACL){return j.toJSON()}if(j instanceof b.GeoPoint){return j.toJSON()}if(f.isDate(j)){return{__type:"Date",iso:j.toJSON()}}if(f.isArray(j)){return f.map(j,function(k){return b._encode(k,h,g)})}if(f.isRegExp(j)){return j.source}if(j instanceof b.Relation){return j.toJSON()}if(j instanceof b.Op){return j.toJSON()}if(j instanceof b.File){if(!j.url()){throw"Tried to save an object containing an unsaved file."}return{__type:"File",name:j.name(),url:j.url()}}if(f.isObject(j)){var e={};b._objectEach(j,function(m,l){e[l]=b._encode(m,h,g)});return e}return j};b._decode=function(h,l){var f=b._;if(h=="authData"){return l}if(!f.isObject(l)){return l}if(f.isArray(l)){b._arrayEach(l,function(o,n){l[n]=b._decode(n,o)});return l}if(l instanceof b.Object){return l}if(l instanceof b.File){return l}if(l instanceof b.Op){return l}if(l.__op){return b.Op._decode(l)}if(l.__type==="Pointer"){var m=b.Object._create(l.className);m._finishFetch({objectId:l.objectId},false);return m}if(l.__type==="Object"){var j=l.className;delete l.__type;delete l.className;var e=b.Object._create(j);e._finishFetch(l,true);return e}if(l.__type==="Date"){return b._NCMBDate(l.iso)}if(l.__type==="GeoPoint"){return new b.GeoPoint({latitude:l.latitude,longitude:l.longitude})}if(h==="ACL"){if(l instanceof b.ACL){return l}return new b.ACL(l)}if(l.__type==="Relation"){var k=new b.Relation(null,h);k.targetClassName=l.className;return k}if(l.__type==="File"){var g=new b.File(l.name);g._url=l.url;return g}b._objectEach(l,function(o,n){l[n]=b._decode(n,o)});return l};b._arrayEach=b._.each;b._traverse=function(f,g,e){if(f instanceof b.Object){e=e||[];if(b._.indexOf(e,f)>=0){return}e.push(f);b._traverse(f.attributes,g,e);return g(f)}if(f instanceof b.Relation||f instanceof b.File){return g(f)}if(b._.isArray(f)){b._.each(f,function(k,j){var h=b._traverse(k,g,e);if(h){f[j]=h}});return g(f)}if(b._.isObject(f)){b._each(f,function(k,j){var h=b._traverse(k,g,e);if(h){f[j]=h}});return g(f)}return g(f)};b._objectEach=b._each=function(f,g){var e=b._;if(e.isObject(f)){e.each(e.keys(f),function(h){g(f[h],h)})}else{e.each(f,g)}};b._isNullOrUndefined=function(e){return b._.isNull(e)||b._.isUndefined(e)};b._createUuid=function(){var e=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e())}}(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.Promise=function(){this._resolved=false;this._rejected=false;this._resolvedCallbacks=[];this._rejectedCallbacks=[]};b.extend(c.Promise,{is:function(d){if(d&&d.then&&b.isFunction(d.then)){return d&&d.then&&b.isFunction(d.then)}else{return false}},as:function(){var d=new c.Promise();d.resolve.apply(d,arguments);return d},error:function(){var d=new c.Promise();d.reject.apply(d,arguments);return d},when:function(g){var j;if(g&&c._isNullOrUndefined(g.length)){j=arguments}else{j=g}var h=j.length;var e=false;var f=[];var l=[];f.length=j.length;l.length=j.length;if(h===0){return c.Promise.as.apply(this,f)}var k=new c.Promise();var d=function(){h=h-1;if(h===0){if(e){k.reject(l)}else{k.resolve.apply(k,f)}}};c._arrayEach(j,function(m,n){if(c.Promise.is(m)){m.then(function(o){f[n]=o;d()},function(o){l[n]=o;e=true;d()})}else{f[n]=m;d()}});return k},_continueWhile:function(d,e){if(d()){return e().then(function(){return c.Promise._continueWhile(d,e)})}return c.Promise.as()}});b.extend(c.Promise.prototype,{resolve:function(d){if(this._resolved||this._rejected){throw"A promise was resolved even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._resolved=true;this._result=arguments;var e=arguments;c._arrayEach(this._resolvedCallbacks,function(f){f.apply(this,e)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},reject:function(d){if(this._resolved||this._rejected){throw"A promise was rejected even though it had already been "+(this._resolved?"resolved":"rejected")+"."}this._rejected=true;this._error=d;c._arrayEach(this._rejectedCallbacks,function(e){e(d)});this._resolvedCallbacks=[];this._rejectedCallbacks=[]},then:function(d,f){var g=new c.Promise();var h=function(){var j=arguments;if(d){j=[d.apply(this,j)]}if(j.length===1&&c.Promise.is(j[0])){j[0].then(function(){g.resolve.apply(g,arguments)},function(k){g.reject(k)})}else{g.resolve.apply(g,j)}};var e=function(k){var j=[];if(f){j=[f(k)];if(j.length===1&&c.Promise.is(j[0])){j[0].then(function(){g.resolve.apply(g,arguments)},function(l){g.reject(l)})}else{g.reject(j[0])}}else{g.reject(k)}};if(this._resolved){h.apply(this,this._result)}else{if(this._rejected){e(this._error)}else{this._resolvedCallbacks.push(h);this._rejectedCallbacks.push(e)}}return g},_thenRunCallbacks:function(f,e){var d;if(b.isFunction(f)){var g=f;d={success:function(h){g(h,null)},error:function(h){g(null,h)}}}else{d=b.clone(f)}d=d||{};return this.then(function(h){if(d.success){d.success.apply(this,arguments)}else{if(e){e.trigger("sync",e,h,d)}}return c.Promise.as.apply(c.Promise,arguments)},function(h){if(d.error){if(!b.isUndefined(e)){d.error(e,h)}else{d.error(h)}}else{if(e){e.trigger("error",e,h,d)}}return c.Promise.error(h)})},_continueWith:function(d){return this.then(function(){return d(arguments,null)},function(e){return d(null,e)})}})}(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.Error=function(e,d){this.code=e;this.message=d};b.extend(c.Error,{OTHER_CAUSE:-1,BAD_REQUEST:"E400000",INVALID_JSON:"E400001",INVALID_TYPE:"E400002",REQUIRED:"E400003",INVALID_FORMAT:"E400004",INVALID_VALUE:"E400005",NOT_EXIST:"E400006",RELATION_ERROR:"E400008",INVALID_SIZE:"E400009",INCORRECT_HEADER:"E401001",INCORRECT_PASSWORD:"E401002",OAUTH_ERROR:"E401003",INVALID_ACL:"E403001",INVALID_OPERATION:"E403002",FORBIDDEN_OPERATION:"E403003",INVALID_SETTING:"E403005",INVALID_GEOPOINT:"E403006",INVALID_METHOD:"E405001",DUPPLICATION_ERROR:"E409001",FILE_SIZE_ERROR:"E413001",DOCUMENT_SIZE_ERROR:"E413002",REQUEST_LIMIT_ERROR:"E413003",UNSUPPORT_MEDIA:"E415001",REQUEST_OVERLOAD:"E429001",SYSTEM_ERROR:"E500001",STORAGE_ERROR:"E502001",MAIL_ERROR:"E502002",DATABASE_ERROR:"E502003"})}(this));(function(){var a=this;var c=(a.NCMB||(a.NCMB={}));var b=/\s+/;var d=Array.prototype.slice;c.Events={on:function(h,m,g){var f,k,j,e,l;if(!m){return this}h=h.split(b);f=this._callbacks||(this._callbacks={});k=h.shift();while(k){l=f[k];j=l?l.tail:{};j.next=e={};j.context=g;j.callback=m;f[k]={tail:e,next:l?l.next:j};k=h.shift()}return this},off:function(m,k,f){var e,n,g,j,h,l;if(!(n=this._callbacks)){return}if(!(m||k||f)){delete this._callbacks;return this}m=m?m.split(b):_.keys(n);e=m.shift();while(e){g=n[e];delete n[e];if(!g||!(k||f)){continue}j=g.tail;g=g.next;while(g!==j){h=g.callback;l=g.context;if((k&&h!==k)||(f&&l!==f)){this.on(e,h,l)}g=g.next}e=m.shift()}return this},trigger:function(h){var m,l,g,f,e,k,j;if(!(g=this._callbacks)){return this}k=g.all;h=h.split(b);j=d.call(arguments,1);m=h.shift();while(m){l=g[m];if(l){f=l.tail;while((l=l.next)!==f){l.callback.apply(l.context||this,j)}}l=k;if(l){f=l.tail;e=[m].concat(j);while((l=l.next)!==f){l.callback.apply(l.context||this,e)}}m=h.shift()}return this}};c.Events.bind=c.Events.on;c.Events.unbind=c.Events.off}.call(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.Object=function(d,e){if(b.isString(d)){return c.Object._create.apply(this,arguments)}d=d||{};if(e&&e.parse){d=this.parse(d)}var f=c._getValue(this,"defaults");if(f){d=b.extend({},f,d)}if(e&&e.collection){this.collection=e.collection}this._serverData={};this._opSetQueue=[{}];this.attributes={};this._hashedJSON={};this._escapedAttributes={};this.cid=b.uniqueId("c");this.changed={};this._silent={};this._pending={};if(!this.set(d,{silent:true})){throw new Error("Can't create an invalid NCMB.Object")}this.changed={};this._silent={};this._pending={};this._hasData=true;this._previousAttributes=b.clone(this.attributes);this.initialize.apply(this,arguments)};c.Object.saveAll=function(e,d){return c.Object._deepSaveAsync(e)._thenRunCallbacks(d)};b.extend(c.Object.prototype,c.Events,{_existed:false,initialize:function(){},toJSON:function(){var d=this._toFullJSON();c._arrayEach(["__type","className"],function(e){delete d[e]});return d},_toFullJSON:function(e){var d=b.clone(this.attributes);c._objectEach(d,function(g,f){d[f]=c._encode(g,e)});c._objectEach(this._operations,function(g,f){d[f]=g});if(b.has(this,"id")){d.objectId=this.id}if(b.has(this,"createdAt")){if(b.isDate(this.createdAt)){d.createdAt=this.createdAt.toJSON()}else{d.createdAt=this.createdAt}}if(b.has(this,"updatedAt")){if(b.isDate(this.updatedAt)){d.updatedAt=this.updatedAt.toJSON()}else{d.updatedAt=this.updatedAt}}d.__type="Object";d.className=this.className;return d},_refreshCache:function(){var d=this;if(d._refreshingCache){return}d._refreshingCache=true;c._objectEach(this.attributes,function(f,e){if(f instanceof c.Object){f._refreshCache()}else{if(b.isObject(f)){if(d._resetCacheForKey(e)){d.set(e,new c.Op.Set(f),{silent:true})}}}});delete d._refreshingCache},dirty:function(e){this._refreshCache();var d=b.last(this._opSetQueue);if(e){return(d[e]?true:false)}if(!this.id){return true}if(b.keys(d).length>0){return true}return false},_toPointer:function(){if(!this.id){throw new Error("Can't serialize an unsaved NCMB.Object")}return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(d){return this.attributes[d]},relation:function(d){var e=this.get(d);if(e){if(!(e instanceof c.Relation)){throw"Called relation() on non-relation field "+d}e._ensureParentAndKey(this,d);return e}else{return new c.Relation(this,d)}},escape:function(e){var d=this._escapedAttributes[e];if(d){return d}var g=this.attributes[e];var f;if(c._isNullOrUndefined(g)){f=""}else{f=b.escape(g.toString())}this._escapedAttributes[e]=f;return f},has:function(d){return !c._isNullOrUndefined(this.attributes[d])},_mergeMagicFields:function(e){var d=this;var f=["id","objectId","createdAt","updatedAt"];c._arrayEach(f,function(g){if(e[g]){if(g==="objectId"){d.id=e[g]}else{if((g==="createdAt"||g==="updatedAt")&&!b.isDate(e[g])){d[g]=c._NCMBDate(e[g])}else{d[g]=e[g]}}delete e[g]}})},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var e=this;var d=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);var f=b.first(this._opSetQueue);c._objectEach(d,function(k,h){var j=d[h];var g=f[h];if(j&&g){f[h]=g._mergeWithPrevious(j)}else{if(j){f[h]=j}}});this._saving=this._saving-1},_finishSave:function(f){var d={};c._traverse(this.attributes,function(h){if(h instanceof c.Object&&h.id&&h._hasData){d[h.id]=h}});var g=b.first(this._opSetQueue);this._opSetQueue=b.rest(this._opSetQueue);this._applyOpSet(g,this._serverData);this._mergeMagicFields(f);var e=this;c._objectEach(f,function(j,h){e._serverData[h]=c._decode(h,j);var k=c._traverse(e._serverData[h],function(l){if(l instanceof c.Object&&d[l.id]){return d[l.id]}});if(k){e._serverData[h]=k}});this._rebuildAllEstimatedData();this._saving=this._saving-1},_finishFetch:function(f,e){this._opSetQueue=[{}];this._mergeMagicFields(f);var d=this;c._objectEach(f,function(h,g){d._serverData[g]=c._decode(g,h)});this._rebuildAllEstimatedData();this._refreshCache();this._opSetQueue=[{}];this._hasData=e},_applyOpSet:function(e,f){var d=this;c._objectEach(e,function(h,g){f[g]=h._estimate(f[g],d,g);if(f[g]===c.Op._UNSET){delete f[g]}})},_resetCacheForKey:function(e){var f=this.attributes[e];if(b.isObject(f)&&!(f instanceof c.Object)&&!(f instanceof c.File)){f=f.toJSON?f.toJSON():f;var d=JSON.stringify(f);if(this._hashedJSON[e]!==d){this._hashedJSON[e]=d;return true}}return false},_rebuildEstimatedDataForKey:function(e){var d=this;delete this.attributes[e];if(this._serverData[e]){this.attributes[e]=this._serverData[e]}c._arrayEach(this._opSetQueue,function(f){var g=f[e];if(g){d.attributes[e]=g._estimate(d.attributes[e],d,e);if(d.attributes[e]===c.Op._UNSET){delete d.attributes[e]}else{d._resetCacheForKey(e)}}})},_rebuildAllEstimatedData:function(){var d=this;var e=b.clone(this.attributes);this.attributes=b.clone(this._serverData);c._arrayEach(this._opSetQueue,function(f){d._applyOpSet(f,d.attributes);c._objectEach(f,function(h,g){d._resetCacheForKey(g)})});c._objectEach(e,function(f,g){if(d.attributes[g]!==f){d.trigger("change:"+g,d,d.attributes[g],{})}});c._objectEach(this.attributes,function(g,f){if(!b.has(e,f)){d.trigger("change:"+f,d,g,{})}})},set:function(j,h,m){var k,g;if(b.isObject(j)||c._isNullOrUndefined(j)){k=j;c._objectEach(k,function(o,n){k[n]=c._decode(n,o)});m=h}else{k={};k[j]=c._decode(j,h)}m=m||{};if(!k){return this}if(k instanceof c.Object){k=k.attributes}if(m.unset){c._objectEach(k,function(n,o){k[o]=new c.Op.Unset()})}var f=b.clone(k);var l=this;c._objectEach(f,function(n,o){if(n instanceof c.Op){f[o]=n._estimate(l.attributes[o],l,o);if(f[o]===c.Op._UNSET){delete f[o]}}});if(!this._validate(k,m)){return false}this._mergeMagicFields(k);m.changes={};var d=this._escapedAttributes;var e=this._previousAttributes||{};c._arrayEach(b.keys(k),function(o){var q=k[o];if(q instanceof c.Relation){q.parent=l}if(!(q instanceof c.Op)){q=new c.Op.Set(q)}var n=true;if(q instanceof c.Op.Set&&b.isEqual(l.attributes[o],q.value)){n=false}if(n){delete d[o];if(m.silent){l._silent[o]=true}else{m.changes[o]=true}}var p=b.last(l._opSetQueue);p[o]=q._mergeWithPrevious(p[o]);l._rebuildEstimatedDataForKey(o);if(n){l.changed[o]=l.attributes[o];if(!m.silent){l._pending[o]=true}}else{delete l.changed[o];delete l._pending[o]}});if(!m.silent){this.change(m)}return this},unset:function(e,d){d=d||{};return this.set(e,null,d)},increment:function(e,d){if(b.isUndefined(d)||b.isNull(d)){d=1}return this.set(e,new c.Op.Increment(d))},add:function(d,e){return this.set(d,new c.Op.Add([e]))},addUnique:function(d,e){return this.set(d,new c.Op.AddUnique([e]))},remove:function(d,e){return this.set(d,new c.Op.Remove([e]))},op:function(d){return b.last(this._opSetQueue)[d]},clear:function(d){d=d||{};d.unset=true;var e=b.extend(this.attributes,this._operations);return this.set(e,d)},_getSaveJSON:function(){var d=b.clone(b.first(this._opSetQueue));c._objectEach(d,function(f,e){d[e]=f.toJSON()});return d},_canBeSerialized:function(){return c.Object._canBeSerializedAsValue(this.attributes)},fetch:function(e){var d=this;var f=c._request("classes",this.className,this.id,"GET");return f.then(function(h,g,j){d._finishFetch(d.parse(h,g,j),true);return d})._thenRunCallbacks(e,this)},save:function(o,q){var f,m,h,l;m=o;if(!q&&m){var n=b.reject(m,function(s,r){return b.include(["success","error","wait"],r)});if(n.length===0){var p=true;if(b.has(m,"success")&&!b.isFunction(m.success)){p=false}if(b.has(m,"error")&&!b.isFunction(m.error)){p=false}if(p){return this.save(null,m)}}}q=b.clone(q)||{};if(q.wait){h=b.clone(this.attributes)}var j=b.clone(q)||{};if(j.wait){j.silent=true}var e;j.error=function(s,r){e=r};if(m&&!this.set(m,j)){return c.Promise.error(e)._thenRunCallbacks(q,this)}var g=this;g._refreshCache();var k=[];var d=[];c.Object._findUnsavedChildren(g.attributes,k,d);if(k.length+d.length>0){return c.Object._deepSaveAsync(this.attributes).then(function(){return g.save(null,q)},function(r){return c.Promise.error(r)._thenRunCallbacks(q,g)})}this._startSave();this._saving=(this._saving||0)+1;this._allPreviousSaves=this._allPreviousSaves||c.Promise.as();this._allPreviousSaves=this._allPreviousSaves._continueWith(function(){if(g.className=="file"){if(g._newFlag){var v="POST"}else{var v="PUT"}g.id=g.toJSON().fileName}else{var v=g.id?"PUT":"POST"}var s=g._getSaveJSON();var r="classes";var t=g.className;var u=c._request(r,t,g.id,v,s);u=u.then(function(z,w,y){var x=g.parse(z,w,y);if(q.wait){x=b.extend(m||{},x)}g._finishSave(x);if(q.wait){g.set(h,j)}return g},function(w){g._cancelSave();return c.Promise.error(w)})._thenRunCallbacks(q,g);return u});return this._allPreviousSaves},destroy:function(f){f=f||{};var e=this;var h=function(){e.trigger("destroy",e,e.collection,f)};if(!this.id){var d=this.get("fileName");if(d){this.id=d}else{return h()}}if(!f.wait){h()}var g=c._request("classes",this.className,this.id,"DELETE");return g.then(function(){if(f.wait){h()}return e})._thenRunCallbacks(f,this)},parse:function(g,d,f){var e=b.clone(g);b(["createdAt","updatedAt"]).each(function(h){if(e[h]){e[h]=c._NCMBDate(e[h])}});if(!e.updatedAt){e.updatedAt=e.createdAt}if(d){this._existed=(d!==201)}return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.id},change:function(f){f=f||{};var h=this._changing;this._changing=true;var e=this;c._objectEach(this._silent,function(j){e._pending[j]=true});var g=b.extend({},f.changes,this._silent);this._silent={};c._objectEach(g,function(k,j){e.trigger("change:"+j,e,e.get(j),f)});if(h){return this}var d=function(k,j){if(!e._pending[j]&&!e._silent[j]){delete e.changed[j]}};while(!b.isEmpty(this._pending)){this._pending={};this.trigger("change",this,f);c._objectEach(this.changed,d);e._previousAttributes=b.clone(this.attributes)}this._changing=false;return this},existed:function(){return this._existed},changedAttributes:function(e){if(!e){return this.hasChanged()?b.clone(this.changed):false}var f={};var d=this._previousAttributes;c._objectEach(e,function(h,g){if(!b.isEqual(d[g],h)){f[g]=h}});return f},previous:function(d){if(!arguments.length||!this._previousAttributes){return null}return this._previousAttributes[d]},previousAttributes:function(){return b.clone(this._previousAttributes)},isValid:function(){return !this.validate(this.attributes)},validate:function(e,d){if(b.has(e,"ACL")&&!(e.ACL instanceof c.ACL)){return new c.Error(c.Error.OTHER_CAUSE,"ACL must be a NCMB.ACL.")}return false},_validate:function(f,e){if(e.silent||!this.validate){return true}f=b.extend({},this.attributes,f);var d=this.validate(f,e);if(!d){return true}if(e&&e.error){e.error(this,d,e)}else{this.trigger("error",this,d,e)}return false},getACL:function(){return this.get("acl")},setACL:function(e,d){return this.set("acl",e,d)}});c.Object._getSubclass=function(e){if(!b.isString(e)){throw"NCMB.Object._getSubclass requires a string argument."}var d=c.Object._classMap[e];if(!d){d=c.Object.extend(e);c.Object._classMap[e]=d}return d};c.Object._create=function(g,d,e){var f=c.Object._getSubclass(g);return new f(d,e)};c.Object._classMap={};c.Object._extend=c._extend;c.Object.extend=function(g,f,h){if(!b.isString(g)){if(g&&b.has(g,"className")){return c.Object.extend(g.className,g,f)}else{throw new Error("NCMB.Object.extend's first argument should be the className.")}}if(g==="User"){classname="user"}var d=null;if(b.has(c.Object._classMap,g)){var e=c.Object._classMap[g];d=e._extend(f,h)}else{f=f||{};f.className=g;d=this._extend(f,h)}d.extend=function(k){if(b.isString(k)||(k&&b.has(k,"className"))){return c.Object.extend.apply(d,arguments)}var j=[g].concat(c._.toArray(arguments));return c.Object.extend.apply(d,j)};c.Object._classMap[g]=d;return d};c.Object._findUnsavedChildren=function(d,e,f){c._traverse(d,function(g){if(g instanceof c.Object){g._refreshCache();if(g.dirty()){e.push(g)}return}if(g instanceof c.File){if(!g.url()){f.push(g)}return}})};c.Object._canBeSerializedAsValue=function(d){var e=true;if(d instanceof c.Object){e=!!d.id}else{if(b.isArray(d)){c._arrayEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}else{if(b.isObject(d)){c._objectEach(d,function(f){if(!c.Object._canBeSerializedAsValue(f)){e=false}})}}}return e};c.Object._deepSaveAsync=function(e){var d=[];var h=[];c.Object._findUnsavedChildren(e,d,h);var j=c.Promise.as();b.each(h,function(k){j=j.then(function(){return k.save()})});var g=b.uniq(d);var f=b.uniq(g);return j.then(function(){return c.Promise._continueWhile(function(){return f.length>0},function(){var n=[];var k=[];c._arrayEach(f,function(o){if(n.length>20){k.push(o);return}if(o._canBeSerialized()){n.push(o)}else{k.push(o)}});f=k;if(n.length===0){return c.Promise.error(new c.Error(c.Error.OTHER_CAUSE,"Tried to save a batch with a cycle."))}var l=c.Promise.when(b.map(n,function(o){return o._allPreviousSaves||c.Promise.as()}));var m=new c.Promise();c._arrayEach(n,function(o){o._allPreviousSaves=m});return l._continueWith(function(){return c._request("batch",null,null,"POST",{requests:b.map(n,function(o){var p=o._getSaveJSON();var r="POST";var q="/2013-09-01/classes/"+o.className;if(o.id){q=q+"/"+o.id;r="PUT"}o._startSave();return{method:r,path:q,body:p}})}).then(function(p,o,r){var q;c._arrayEach(n,function(s,t){if(p[t].success){s._finishSave(s.parse(p[t].success,o,r))}else{q=q||p[t].error;s._cancelSave()}});if(q){return c.Promise.error(new c.Error(q.code,q.error))}}).then(function(o){m.resolve(o);return o},function(o){m.reject(o);return c.Promise.error(o)})})})}).then(function(){return e})}}(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.Relation=function(e,d){this.parent=e;this.key=d;this.targetClassName=null};c.Relation.prototype={_ensureParentAndKey:function(e,d){this.parent=this.parent||e;this.key=this.key||d;if(this.parent!==e){throw"Internal Error. Relation retrieved from two different Objects."}if(this.key!==d){throw"Internal Error. Relation retrieved from two different keys."}},add:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation(d,[]);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},remove:function(d){if(!b.isArray(d)){d=[d]}var e=new c.Op.Relation([],d);this.parent.set(this.key,e);this.targetClassName=e._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var d;var e;if(!this.targetClassName){d=c.Object._getSubclass(this.parent.className);e=new c.Query(d);e._extraOptions.redirectClassNameForKey=this.key}else{d=c.Object._getSubclass(this.targetClassName);e=new c.Query(d)}e._addCondition("$relatedTo","object",this.parent._toPointer());e._addCondition("$relatedTo","key",this.key);return e}}}(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.Op=function(){this._initialize.apply(this,arguments)};c.Op.prototype={_initialize:function(){}};b.extend(c.Op,{_extend:c._extend,_opDecoderMap:{},_registerDecoder:function(d,e){c.Op._opDecoderMap[d]=e},_decode:function(d){var e=c.Op._opDecoderMap[d.__op];if(e){return e(d)}else{return undefined}}});c.Op._registerDecoder("Batch",function(d){var e=null;c._arrayEach(d.ops,function(f){f=c.Op._decode(f);e=f._mergeWithPrevious(e)});return e});c.Op.Set=c.Op._extend({_initialize:function(d){this._value=d},value:function(){return this._value},toJSON:function(){return c._encode(this.value())},_mergeWithPrevious:function(d){return this},_estimate:function(d){return this.value()}});c.Op._UNSET={};c.Op.Unset=c.Op._extend({toJSON:function(){return{__op:"Unset"}},_mergeWithPrevious:function(d){return this},_estimate:function(d){return c.Op._UNSET}});c.Op._registerDecoder("Delete",function(d){return new c.Op.Unset()});c.Op.Increment=c.Op._extend({_initialize:function(d){this._amount=d},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.amount())}else{if(d instanceof c.Op.Set){return new c.Op.Set(d.value()+this.amount())}else{if(d instanceof c.Op.Increment){return new c.Op.Increment(this.amount()+d.amount())}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return this.amount()}return d+this.amount()}});c.Op._registerDecoder("Increment",function(d){return new c.Op.Increment(d.amount)});c.Op.Add=c.Op._extend({_initialize:function(d){this._objects=d},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Add){return new c.Op.Add(d.objects().concat(this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{return d.concat(this.objects())}}});c.Op._registerDecoder("Add",function(d){return new c.Op.Add(c._decode(undefined,d.objects))});c.Op.AddUnique=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return new c.Op.Set(this.objects())}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.AddUnique){return new c.Op.AddUnique(this._estimate(d.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return b.clone(this.objects())}else{var e=b.clone(d);c._arrayEach(this.objects(),function(h){if(h instanceof c.Object&&h.id){var g=b.find(e,function(j){return(j instanceof c.Object)&&(j.id===h.id)});if(!g){e.push(h)}else{var f=b.indexOf(e,g);e[f]=h}}else{if(!b.contains(e,h)){e.push(h)}}});return e}}});c.Op._registerDecoder("AddUnique",function(d){return new c.Op.AddUnique(c._decode(undefined,d.objects))});c.Op.Remove=c.Op._extend({_initialize:function(d){this._objects=b.uniq(d)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:c._encode(this.objects())}},_mergeWithPrevious:function(d){if(!d){return this}else{if(d instanceof c.Op.Unset){return d}else{if(d instanceof c.Op.Set){return new c.Op.Set(this._estimate(d.value()))}else{if(d instanceof c.Op.Remove){return new c.Op.Remove(b.union(d.objects(),this.objects()))}else{throw"Op is invalid after previous op."}}}}},_estimate:function(d){if(!d){return[]}else{var e=b.difference(d,this.objects());c._arrayEach(this.objects(),function(f){if(f instanceof c.Object&&f.id){e=b.reject(e,function(g){return(g instanceof c.Object)&&(g.id===f.id)})}});return e}}});c.Op._registerDecoder("Remove",function(d){return new c.Op.Remove(c._decode(undefined,d.objects))});c.Op.Relation=c.Op._extend({_initialize:function(g,e){this._targetClassName=null;var d=this;var f=function(h){if(h instanceof c.Object){if(!h.id){throw"You can't add an unsaved NCMB.Object to a relation."}if(!d._targetClassName){d._targetClassName=h.className}if(d._targetClassName!==h.className){throw"Tried to create a NCMB.Relation with 2 different types: "+d._targetClassName+" and "+h.className+"."}return h.id}return h};this.relationsToAdd=b.uniq(b.map(g,f));this.relationsToRemove=b.uniq(b.map(e,f))},added:function(){var d=this;return b.map(this.relationsToAdd,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},removed:function(){var d=this;return b.map(this.relationsToRemove,function(e){var f=c.Object._create(d._targetClassName);f.id=e;return f})},toJSON:function(){var h=null;var f=null;var e=this;var g=function(j){return{__type:"Pointer",className:e._targetClassName,objectId:j}};var d=null;if(this.relationsToAdd.length>0){d=b.map(this.relationsToAdd,g);h={__op:"AddRelation",objects:d}}if(this.relationsToRemove.length>0){d=b.map(this.relationsToRemove,g);f={__op:"RemoveRelation",objects:d}}if(h&&f){return{__op:"Batch",ops:[h,f]}}return h||f||{}},_mergeWithPrevious:function(g){if(!g){return this}else{if(g instanceof c.Op.Unset){throw"You can't modify a relation after deleting it."}else{if(g instanceof c.Op.Relation){if(g._targetClassName&&g._targetClassName!==this._targetClassName){throw"Related object must be of class "+g._targetClassName+", but "+this._targetClassName+" was passed in."}var f=b.union(b.difference(g.relationsToAdd,this.relationsToRemove),this.relationsToAdd);var e=b.union(b.difference(g.relationsToRemove,this.relationsToAdd),this.relationsToRemove);var d=new c.Op.Relation(f,e);d._targetClassName=this._targetClassName;return d}else{throw"Op is invalid after previous op."}}}},_estimate:function(e,d,f){if(!e){var g=new c.Relation(d,f);g.targetClassName=this._targetClassName}else{if(e instanceof c.Relation){if(this._targetClassName){if(e.targetClassName){if(e.targetClassName!==this._targetClassName){throw"Related object must be a "+e.targetClassName+", but a "+this._targetClassName+" was passed in."}}else{e.targetClassName=this._targetClassName}}return e}else{throw"Op is invalid after previous op."}}}});c.Op._registerDecoder("AddRelation",function(d){return new c.Op.Relation(c._decode(undefined,d.objects),[])});c.Op._registerDecoder("RemoveRelation",function(d){return new c.Op.Relation([],c._decode(undefined,d.objects))})}(this));(function(b){b.NCMB=b.NCMB||{};var e=b.NCMB;var d=e._;var c=function(h){if(h<26){return String.fromCharCode(65+h)}if(h<52){return String.fromCharCode(97+(h-26))}if(h<62){return String.fromCharCode(48+(h-52))}if(h===62){return"+"}if(h===63){return"/"}throw"Tried to encode large digit "+h+" in base64."};var a=function(j){var h=[];h.length=Math.ceil(j.length/3);d.times(h.length,function(n){var m=j[n*3];var l=j[n*3+1]||0;var k=j[n*3+2]||0;var p=(n*3+1)<j.length;var o=(n*3+2)<j.length;h[n]=[c((m>>2)&63),c(((m<<4)&48)|((l>>4)&15)),p?c(((l<<2)&60)|((k>>6)&3)):"=",o?c(k&63):"="].join("")});return h.join("")};var g={ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asc:"text/plain",atom:"application/atom+xml",au:"audio/basic",avi:"video/x-msvideo",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",cdf:"application/x-netcdf",cgm:"image/cgm","class":"application/octet-stream",cpio:"application/x-cpio",cpt:"application/mac-compactpro",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",dif:"video/x-dv",dir:"application/x-director",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",docm:"application/vnd.ms-word.document.macroEnabled.12",dotm:"application/vnd.ms-word.template.macroEnabled.12",dtd:"application/xml-dtd",dv:"video/x-dv",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",exe:"application/octet-stream",ez:"application/andrew-inset",gif:"image/gif",gram:"application/srgs",grxml:"application/srgs+xml",gtar:"application/x-gtar",hdf:"application/x-hdf",hqx:"application/mac-binhex40",htm:"text/html",html:"text/html",ice:"x-conference/x-cooltalk",ico:"image/x-icon",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",jnlp:"application/x-java-jnlp-file",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",kar:"audio/midi",latex:"application/x-latex",lha:"application/octet-stream",lzh:"application/octet-stream",m3u:"audio/x-mpegurl",m4a:"audio/mp4a-latm",m4b:"audio/mp4a-latm",m4p:"audio/mp4a-latm",m4u:"video/vnd.mpegurl",m4v:"video/x-m4v",mac:"image/x-macpaint",man:"application/x-troff-man",mathml:"application/mathml+xml",me:"application/x-troff-me",mesh:"model/mesh",mid:"audio/midi",midi:"audio/midi",mif:"application/vnd.mif",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpga:"audio/mpeg",ms:"application/x-troff-ms",msh:"model/mesh",mxu:"video/vnd.mpegurl",nc:"application/x-netcdf",oda:"application/oda",ogg:"application/ogg",pbm:"image/x-portable-bitmap",pct:"image/pict",pdb:"chemical/x-pdb",pdf:"application/pdf",pgm:"image/x-portable-graymap",pgn:"application/x-chess-pgn",pic:"image/pict",pict:"image/pict",png:"image/png",pnm:"image/x-portable-anymap",pnt:"image/x-macpaint",pntg:"image/x-macpaint",ppm:"image/x-portable-pixmap",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",ppam:"application/vnd.ms-powerpoint.addin.macroEnabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroEnabled.12",potm:"application/vnd.ms-powerpoint.template.macroEnabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroEnabled.12",ps:"application/postscript",qt:"video/quicktime",qti:"image/x-quicktime",qtif:"image/x-quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rdf:"application/rdf+xml",rgb:"image/x-rgb",rm:"application/vnd.rn-realmedia",roff:"application/x-troff",rtf:"text/rtf",rtx:"text/richtext",sgm:"text/sgml",sgml:"text/sgml",sh:"application/x-sh",shar:"application/x-shar",silo:"model/mesh",sit:"application/x-stuffit",skd:"application/x-koan",skm:"application/x-koan",skp:"application/x-koan",skt:"application/x-koan",smi:"application/smil",smil:"application/smil",snd:"audio/basic",so:"application/octet-stream",spl:"application/x-futuresplash",src:"application/x-wais-source",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",svg:"image/svg+xml",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",tsv:"text/tab-separated-values",txt:"text/plain",ustar:"application/x-ustar",vcd:"application/x-cdlink",vrml:"model/vrml",vxml:"application/voicexml+xml",wav:"audio/x-wav",wbmp:"image/vnd.wap.wbmp",wbmxl:"application/vnd.wap.wbxml",wml:"text/vnd.wap.wml",wmlc:"application/vnd.wap.wmlc",wmls:"text/vnd.wap.wmlscript",wmlsc:"application/vnd.wap.wmlscriptc",wrl:"model/vrml",xbm:"image/x-xbitmap",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xml:"application/xml",xpm:"image/x-xpixmap",xsl:"application/xml",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.12",xltm:"application/vnd.ms-excel.template.macroEnabled.12",xlam:"application/vnd.ms-excel.addin.macroEnabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.12",xslt:"application/xslt+xml",xul:"application/vnd.mozilla.xul+xml",xwd:"image/x-xwindowdump",xyz:"chemical/x-xyz",zip:"application/zip"};var f=function(j,k){var l=new e.Promise();if(typeof(FileReader)==="undefined"){return e.Promise.error(new e.Error(-1,"Attempted to use a FileReader on an unsupported browser."))}var h=new FileReader();h.onloadend=function(){if(h.readyState!==2){l.reject(new e.Error(-1,"Error reading file."));return}var n=h.result;var q=/\.([^.]*)$/.exec(j.name);if(q){q=q[1].toLowerCase()}var p=k||g[q]||"text/plain";if(n==="data:"){if(k){n="data:"+k+";base64,"}else{n="data:"+p+";base64,"}}var m=/^data:([^;]*);base64,(.*)$/.exec(n);var o=/^data:base64,(.*)$/.exec(n);if(!m){if(!o){l.reject(new e.Error(-1,"Unable to interpret data URL: "+n));return}else{l.resolve(o[1],k||p)}}else{l.resolve(m[2],k||m[1])}};h.readAsDataURL(j);return l};e.File=e.Object.extend("File",{constructor:function(h,k,j,l){this._name=h;this._data=k;this._type=j;this._newFlag=true;if(d.isString(h)&&(l instanceof e.ACL)){e.Object.prototype.constructor.call(this,null,null);this.ACL=l}else{e.Object.prototype.constructor.call(this,h,k,j,l)}var n=/\.([^.]*)$/.exec(h);if(n){n=n[1].toLowerCase()}var m=j||g[n]||"text/plain";if(!j){this._type=m}if(d.isArray(k)){this._source=e.Promise.as(a(k),m)}else{if(k&&k.base64){this._source=e.Promise.as(k.base64,m)}else{if(typeof(File)!=="undefined"&&k instanceof File){this._source=f(k,j)}else{if(d.isString(k)){throw"Creating a NCMB.File from a String is not yet supported."}}}}},getName:function(){return this._name},save:function(j){var h=this;if(!h._previousSave){h._previousSave=h._source.then(function(k,l){h._dataBase64=k;var m={};m.file=h._data;if(h.ACL){m.acl=JSON.stringify(h.ACL)}else{m.acl=JSON.stringify({"*":{read:true,write:true}})}if(m.file){return e._request("files",h._name,null,"POST",m)}else{return e._request("files",h._name,null,"PUT",m)}}).then(function(k){h._name=k.fileName;return h})}return h._previousSave._thenRunCallbacks(j)},destroy:function(j){j=j||{};var h=this;var l=function(){h.trigger("destroy",h,h.collection,j)};var k=e._request("files",self._name,null,"DELETE");return k.then(function(){if(j.wait){l()}return h})._thenRunCallbacks(j,this)},fetch:function(j){var h=this;return e._request("files",this._name,null,"GET",null).then(function(k){var l="";for(i=0;i<k.length;i++){l+=String.fromCharCode(k.charCodeAt(i)&255)}h._data=l;h._dataBase64=btoa(unescape(encodeURIComponent(k)));return h})._thenRunCallbacks(j)},fetchImgSource:function(j){var k=this.getData();if(k){this._fetchImgSource(j,k)}else{var h=this;h.fetch().then(function(){h._fetchImgSource(j,h._data)})}},_fetchImgSource:function(j,m){var l=m.toString().substring(0,9);var h;if(l.match(/^\x89PNG/)){h="png"}else{if(l.match(/^BM/)){h="bmp"}else{if(l.match(/^GIF87a/)||l.match(/^GIF89a/)){h="gif"}else{if(l.match(/^\xff\xd8/)){h="jpeg"}else{console.log("");return}}}}var k="data:image/"+h+";base64,"+window.btoa(m);j.src=k;return},getContentType:function(){return this._type},getData:function(){return this._data}})}(this));(function(a){a.NCMB=a.NCMB||{};var d=a.NCMB;var c=d._;var b="*";d.ACL=function(f){var e=this;e.permissionsById={};if(c.isObject(f)){if(f instanceof d.User){e.setReadAccess(f,true);e.setWriteAccess(f,true)}else{if(c.isFunction(f)){throw"NCMB.ACL() called with a function.  Did you forget ()?"}d._objectEach(f,function(h,g){if(!c.isString(g)){throw"Tried to create an ACL with an invalid userId."}e.permissionsById[g]={};d._objectEach(h,function(k,j){if(j!=="read"&&j!=="write"){throw"Tried to create an ACL with an invalid permission type."}if(!c.isBoolean(k)){throw"Tried to create an ACL with an invalid permission value."}e.permissionsById[g][j]=k})})}}};d.ACL.prototype.toJSON=function(){return c.clone(this.permissionsById)};d.ACL.prototype._setAccess=function(e,f,h){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}if(!c.isString(f)){throw"userId must be a string."}if(!c.isBoolean(h)){throw"allowed must be either true or false."}var g=this.permissionsById[f];if(!g){if(!h){return}else{g={};this.permissionsById[f]=g}}if(h){this.permissionsById[f][e]=true}else{delete g[e];if(c.isEmpty(g)){delete g[f]}}};d.ACL.prototype._getAccess=function(e,f){if(f instanceof d.User){f=f.id}else{if(f instanceof d.Role){f="role:"+f.getName()}}var g=this.permissionsById[f];if(!g){return false}return g[e]?true:false};d.ACL.prototype.setReadAccess=function(e,f){this._setAccess("read",e,f)};d.ACL.prototype.getReadAccess=function(e){return this._getAccess("read",e)};d.ACL.prototype.setWriteAccess=function(e,f){this._setAccess("write",e,f)};d.ACL.prototype.getWriteAccess=function(e){return this._getAccess("write",e)};d.ACL.prototype.setPublicReadAccess=function(e){this.setReadAccess(b,e)};d.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(b)};d.ACL.prototype.setPublicWriteAccess=function(e){this.setWriteAccess(b,e)};d.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(b)};d.ACL.prototype.getRoleReadAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getReadAccess("role:"+e)}throw"role must be a NCMB.Role or a String"};d.ACL.prototype.getRoleWriteAccess=function(e){if(e instanceof d.Role){e=e.getName()}if(c.isString(e)){return this.getWriteAccess("role:"+e)}throw"role must be a NCMB.Role or a String"};d.ACL.prototype.setRoleReadAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setReadAccess("role:"+f,e);return}throw"role must be a NCMB.Role or a String"};d.ACL.prototype.setRoleWriteAccess=function(f,e){if(f instanceof d.Role){f=f.getName()}if(c.isString(f)){this.setWriteAccess("role:"+f,e);return}throw"role must be a NCMB.Role or a String"}}(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.Role=c.Object.extend("role",{constructor:function(d,e){if(b.isString(d)&&(e instanceof c.ACL)){c.Object.prototype.constructor.call(this,null,null);this.setName(d);this.setACL(e)}else{c.Object.prototype.constructor.call(this,d,e)}},getName:function(){return this.get("roleName")},setName:function(e,d){return this.set("roleName",e,d)},_setRoles:function(e,d){return this.set("belongRole",e,d)},_setUsers:function(e,d){return this.set("belongUser",e,d)},getUsers:function(){var d=this.relation("belongUser");d.targetClassName="user";return d},getRoles:function(){var d=this.relation("belongRole");d.targetClassName="role";return d},validate:function(f,e){if("roleName" in f&&f.roleName!==this.getName()){var d=f.roleName;if(this.id&&this.id!==f.objectId){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.")}if(!b.isString(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name must be a String.")}if(!(/^[0-9a-zA-Z\-_ ]+$/).test(d)){return new c.Error(c.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}}if(c.Object.prototype.validate){return c.Object.prototype.validate.call(this,f,e)}return false}})}(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.Query=function(d){if(b.isString(d)){d=c.Object._getSubclass(d)}this.objectClass=d;this.className=d.prototype.className;this._where={};this._include=[];this._limit=-1;this._skip=0;this._extraOptions={}};c.Query.or=function(d){var d=b.toArray(arguments);var e=null;c._arrayEach(d,function(g){if(b.isNull(e)){e=g.className}if(e!==g.className){throw"All queries must be for the same class"}});var f=new c.Query(e);f._orQuery(d);return f};c.Query.prototype={get:function(d,f){var e=this;e.equalTo("objectId",d);return e.first().then(function(g){if(g){return g}var h=new c.Error(c.Error.OBJECT_NOT_FOUND,"Object not found.");return c.Promise.error(h)})._thenRunCallbacks(f,null)},toJSON:function(){var d={where:this._where};if(this._include.length>0){d.include=this._include.join(",")}if(this._select){d.keys=this._select.join(",")}if(this._limit>=0){d.limit=this._limit}if(this._skip>0){d.skip=this._skip}if(this._order!==undefined){d.order=this._order}c._objectEach(this._extraOptions,function(f,e){d[e]=f});return d},find:function(e){var d=this;var f=c._request("classes",this.className,null,"GET",this.toJSON());return f.then(function(g){return b.map(g.results,function(h){var j;if(g.className){j=new c.Object(g.className)}else{j=new d.objectClass()}j._finishFetch(h,true);return j})})._thenRunCallbacks(e)},count:function(d){var f=this.toJSON();f.limit=0;f.count=1;var e=c._request("classes",this.className,null,"GET",f);return e.then(function(g){return g.count})._thenRunCallbacks(d)},first:function(e){var d=this;var g=this.toJSON();g.limit=1;var f=c._request("classes",this.className,null,"GET",g);return f.then(function(h){return b.map(h.results,function(j){var k=new d.objectClass();k._finishFetch(j,true);return k})[0]})._thenRunCallbacks(e)},collection:function(d,e){e=e||{};return new c.Collection(d,b.extend(e,{model:this.objectClass,query:this}))},skip:function(d){this._skip=d;return this},limit:function(d){this._limit=d;return this},equalTo:function(d,e){this._where[d]=c._encode(e);return this},_addCondition:function(d,f,e){if(!this._where[d]){this._where[d]={}}this._where[d][f]=c._encode(e);return this},notEqualTo:function(d,e){this._addCondition(d,"$ne",e);return this},lessThan:function(d,e){this._addCondition(d,"$lt",e);return this},greaterThan:function(d,e){this._addCondition(d,"$gt",e);return this},lessThanOrEqualTo:function(d,e){this._addCondition(d,"$lte",e);return this},greaterThanOrEqualTo:function(d,e){this._addCondition(d,"$gte",e);return this},containedIn:function(e,d){this._addCondition(e,"$in",d);return this},notContainedIn:function(e,d){this._addCondition(e,"$nin",d);return this},containsAll:function(e,d){this._addCondition(e,"$all",d);return this},exists:function(d){this._addCondition(d,"$exists",true);return this},doesNotExist:function(d){this._addCondition(d,"$exists",false);return this},matchesQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$inQuery",e);return this},doesNotMatchQuery:function(d,f){var e=f.toJSON();e.className=f.className;this._addCondition(d,"$notInQuery",e);return this},matchesKeyInQuery:function(f,e,h){var g=h.toJSON();var d={};d.className=h.className;d.where=g.where;this._addCondition(f,"$select",{query:d,key:e});return this},doesNotMatchKeyInQuery:function(e,d,g){var f=g.toJSON();f.className=g.className;this._addCondition(e,"$dontSelect",{key:d,query:f});return this},_orQuery:function(d){var e=b.map(d,function(f){return f.toJSON().where});this._where.$or=e;return this},_quote:function(d){return"\\Q"+d.replace("\\E","\\E\\\\E\\Q")+"\\E"},ascending:function(d){this._order=d;return this},descending:function(d){this._order="-"+d;return this},include:function(){var d=this;c._arrayEach(arguments,function(e){if(b.isArray(e)){d._include=d._include.concat(e)}else{d._include.push(e)}});return this},relatedTo:function(e,g,f){var d=this;var h={};h.__type="Pointer";h.className=g;h.objectId=e;d._addCondition("$relatedTo","object",h);d._addCondition("$relatedTo","key",f);return this},select:function(){var d=this;this._select=this._select||[];c._arrayEach(arguments,function(e){if(b.isArray(e)){d._select=d._select.concat(e)}else{d._select.push(e)}});return this},each:function(j,e){e=e||{};if(this._order||this._skip||(this._limit>=0)){var d="Cannot iterate on a query with sort, skip, or limit.";return c.Promise.error(d)._thenRunCallbacks(e)}var g=new c.Promise();var f=new c.Query(this.objectClass);f._limit=e.batchSize||100;f._where=b.clone(this._where);f._include=b.clone(this._include);f.ascending("objectId");var h=false;return c.Promise._continueWhile(function(){return !h},function(){return f.find().then(function(k){var l=c.Promise.as();c._.each(k,function(m){l=l.then(function(){return j(m)})});return l.then(function(){if(k.length>=f._limit){f.greaterThan("objectId",k[k.length-1].id)}else{h=true}})})})._thenRunCallbacks(e)},near:function(e,d){if(!(d instanceof c.GeoPoint)){d=new c.GeoPoint(d)}this._addCondition(e,"$nearSphere",d);return this},withinRadians:function(e,d,f){this.near(e,d);this._addCondition(e,"$maxDistanceInRadians",f);return this},withinMiles:function(e,d,f){this.near(e,d);this._addCondition(e,"$maxDistanceInMiles",f);return this},withinKilometers:function(e,d,f){this.near(e,d);this._addCondition(e,"$maxDistanceInKilometers",f);return this},withinGeoBox:function(d,f,e){if(!(f instanceof c.GeoPoint)){f=new c.GeoPoint(f)}if(!(e instanceof c.GeoPoint)){e=new c.GeoPoint(e)}this._addCondition(d,"$within",{"$box":[f,e]});return this}}}(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.User=c.Object.extend("user",{_isCurrentUser:false,_mergeMagicFields:function(d){if(d.sessionToken){this._sessionToken=d.sessionToken;delete d.sessionToken}c.User.__super__._mergeMagicFields.call(this,d)},_cleanupAuthData:function(){if(!this.isCurrent()){return}var d=this.get("authData");if(!d){return}c._objectEach(this.get("authData"),function(f,e){if(!d[e]){delete d[e]}})},_synchronizeAllAuthData:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(g,f){d._synchronizeAuthData(f)})},_synchronizeAuthData:function(g){if(!this.isCurrent()){return}var d;if(b.isString(g)){d=g;g=c.User._authProviders[d]}else{d=g.getAuthType()}var e=this.get("authData");if(!e||!g){return}var f=g.restoreAuthentication(e[d]);if(!f){this._unlinkFrom(g)}},_handleSaveResult:function(d){if(d){this._isCurrentUser=true}this._cleanupAuthData();this._synchronizeAllAuthData();delete this._serverData.password;this._rebuildEstimatedDataForKey("password");this._refreshCache();if(d||this.isCurrent()){c.User._saveCurrentUser(this)}},_linkWith:function(k,f){var e;if(b.isString(k)){e=k;k=c.User._authProviders[k]}else{e=k.getAuthType()}if(b.has(f,"authData")){var g=this.get("authData")||{};g[e]=f.authData;if(e=="facebook"){if(g[e]){if(g[e]["expiration_date"]){g[e]["expiration_date"]={__type:"Date",iso:g[e]["expiration_date"]}}}}this.set("authData",g);var j=b.clone(f)||{};j.success=function(l){l._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save({authData:g},j)}else{var d=this;var h=new c.Promise();k.authenticate({success:function(m,l){d._linkWith(m,{authData:l,success:f.success,error:f.error}).then(function(){h.resolve(d)})},error:function(m,l){if(f.error){f.error(d,l)}h.reject(l)}});return h}},_unlinkFrom:function(h,f){var e;if(b.isString(h)){e=h}else{e=h.getAuthType()}var g=b.clone(f);var d=this;if(!g){g={}}g.authData=null;g.success=function(j){d._synchronizeAuthData(h);if(f){if(f.success){f.success.apply(this,arguments)}}};return this._linkWith(h,g)},_isLinked:function(f){var d;if(b.isString(f)){d=f}else{d=f.getAuthType()}var e=this.get("authData")||{};return !!e[d]},_logOutWithAll:function(){var e=this.get("authData");if(!e){return}var d=this;c._objectEach(this.get("authData"),function(g,f){d._logOutWith(f)})},_logOutWith:function(d){if(!this.isCurrent()){return}if(b.isString(d)){d=c.User._authProviders[d]}if(d&&d.deauthenticate){d.deauthenticate()}},signUp:function(g,f){var e;f=f||{};var h=(g&&g.userName)||this.get("userName");if(!h||(h==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty name.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var d=(g&&g.password)||this.get("password");if(!d||(d==="")){e=new c.Error(c.Error.OTHER_CAUSE,"Cannot sign up user with an empty password.");if(f&&f.error){f.error(this,e)}return c.Promise.error(e)}var j=b.clone(f);j.success=function(k){k._handleSaveResult(true);if(f.success){f.success.apply(this,arguments)}};return this.save(g,j)},logIn:function(e){var d=this;var f=c._request("login",null,null,"GET",this.toJSON());return f.then(function(k,g,j){var h=d.parse(k,g,j);d._finishFetch(h);d._handleSaveResult(true);return d})._thenRunCallbacks(e,this)},save:function(h,e){var f,d,j,e,g;d=h;e=e||{};var k=b.clone(e);k.success=function(l){l._handleSaveResult(false);if(e.success){e.success.apply(this,arguments)}};return c.Object.prototype.save.call(this,d,k)},fetch:function(d){var e=d?b.clone(d):{};e.success=function(f){f._handleSaveResult(false);if(d&&d.success){d.success.apply(this,arguments)}};return c.Object.prototype.fetch.call(this,e)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("userName")},setUsername:function(e,d){return this.set("userName",e,d)},setPassword:function(e,d){return this.set("password",e,d)},getEmail:function(){return this.get("mailAddress")},setEmail:function(e,d){return this.set("mailAddress",e,d)},authenticated:function(){return !!this._sessionToken&&(c.User.current()&&c.User.current().id===this.id)}},{_currentUser:null,_currentUserMatchesDisk:false,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(h,g,f,e){f=f||{};f.userName=h;f.password=g;var d=c.Object._create("user");return d.signUp(f,e)},logIn:function(g,f,e){var d=c.Object._create("user");d._finishFetch({userName:g,password:f});return d.logIn(e)},logOut:function(){if(c.User._currentUser!==null){c.User._currentUser._logOutWithAll();c.User._currentUser._isCurrentUser=false}c.User._currentUserMatchesDisk=true;c.User._currentUser=null;c.localStorage.removeItem(c._getNCMBPath(c.User._CURRENT_USER_KEY))},requestPasswordReset:function(e,d){var f={mailAddress:e};var g=c._request("requestPasswordReset",null,null,"POST",f);return g._thenRunCallbacks(d)},current:function(){if(c.User._currentUser){return c.User._currentUser}if(c.User._currentUserMatchesDisk){return c.User._currentUser}c.User._currentUserMatchesDisk=true;var d=c.localStorage.getItem(c._getNCMBPath(c.User._CURRENT_USER_KEY));if(!d){return null}c.User._currentUser=c.Object._create("user");c.User._currentUser._isCurrentUser=true;var e=JSON.parse(d);c.User._currentUser.id=e._id;delete e._id;c.User._currentUser._sessionToken=e._sessionToken;delete e._sessionToken;c.User._currentUser.set(e);c.User._currentUser._synchronizeAllAuthData();c.User._currentUser._refreshCache();c.User._currentUser._opSetQueue=[{}];return c.User._currentUser},_saveCurrentUser:function(d){if(c.User._currentUser!==d){c.User.logOut()}d._isCurrentUser=true;c.User._currentUser=d;c.User._currentUserMatchesDisk=true;var e=d.toJSON();e._id=d.id;e._sessionToken=d._sessionToken;c.localStorage.setItem(c._getNCMBPath(c.User._CURRENT_USER_KEY),JSON.stringify(e))},_registerAuthenticationProvider:function(d){c.User._authProviders[d.getAuthType()]=d;if(c.User.current()){c.User.current()._synchronizeAuthData(d.getAuthType())}},_logInWith:function(g,e){if(g=="anonymous"){var f={};f.id=c._createUuid();e.authData=f}var d=c.Object._create("user");return d._linkWith(g,e)}})}(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.AnonymousUtils={isLink:function(d){return d._isLinked("anonymous")},logIn:function(d){return c.User._logInWith("anonymous",d)}}}(this));(function(a){a.NCMB=a.NCMB||{};var d=a.NCMB;var c=d._;d.Collection=function(f,e){e=e||{};if(e.comparator){this.comparator=e.comparator}if(e.model){this.model=e.model}if(e.query){this.query=e.query}this._reset();this.initialize.apply(this,arguments);if(f){this.reset(f,{silent:true,NCMB:e.parse})}};c.extend(d.Collection.prototype,d.Events,{model:d.Object,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(f,o){var k,m,h,l,n,g,j={},e={};o=o||{};f=c.isArray(f)?f.slice():[f];for(k=0,h=f.length;k<h;k++){f[k]=this._prepareModel(f[k],o);l=f[k];if(!l){throw new Error("Can't add an invalid model to a collection")}n=l.cid;if(j[n]||this._byCid[n]){throw new Error("Duplicate cid: can't add the same model to a collection twice")}g=l.id;if(!d._isNullOrUndefined(g)&&(e[g]||this._byId[g])){throw new Error("Duplicate id: can't add the same model to a collection twice")}e[g]=l;j[n]=l}for(k=0;k<h;k++){(l=f[k]).on("all",this._onModelEvent,this);this._byCid[l.cid]=l;if(l.id){this._byId[l.id]=l}}this.length+=h;m=d._isNullOrUndefined(o.at)?this.models.length:o.at;this.models.splice.apply(this.models,[m,0].concat(f));if(this.comparator){this.sort({silent:true})}if(o.silent){return this}for(k=0,h=this.models.length;k<h;k++){l=this.models[k];if(j[l.cid]){o.index=k;l.trigger("add",l,this,o)}}return this},remove:function(k,h){var j,e,g,f;h=h||{};k=c.isArray(k)?k.slice():[k];for(j=0,e=k.length;j<e;j++){f=this.getByCid(k[j])||this.get(k[j]);if(!f){continue}delete this._byId[f.id];delete this._byCid[f.cid];g=this.indexOf(f);this.models.splice(g,1);this.length--;if(!h.silent){h.index=g;f.trigger("remove",f,this,h)}this._removeReference(f)}return this},get:function(e){return e&&this._byId[e.id||e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(f){f=f||{};if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}var e=c.bind(this.comparator,this);if(this.comparator.length===1){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!f.silent){this.trigger("reset",this,f)}return this},pluck:function(e){return c.map(this.models,function(f){return f.get(e)})},reset:function(g,f){var e=this;g=g||[];f=f||{};d._arrayEach(this.models,function(h){e._removeReference(h)});this._reset();this.add(g,{silent:true,NCMB:f.parse});if(!f.silent){this.trigger("reset",this,f)}return this},fetch:function(e){e=c.clone(e)||{};if(e.parse===undefined){e.parse=true}var g=this;var f=this.query||new d.Query(this.model);return f.find().then(function(h){if(e.add){g.add(h,e)}else{g.reset(h,e)}return g})._thenRunCallbacks(e,this)},create:function(f,e){var g=this;e=e?c.clone(e):{};f=this._prepareModel(f,e);if(!f){return false}if(!e.wait){g.add(f,e)}var h=e.success;e.success=function(j,l,k){if(e.wait){g.add(j,e)}if(h){h(j,l)}else{j.trigger("sync",f,l,e)}};f.save(null,e);return f},parse:function(f,e){return f},chain:function(){return c(this.models).chain()},_reset:function(e){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(g,f){if(!(g instanceof d.Object)){var e=g;f.collection=this;g=new this.model(e,f);if(!g._validate(g.attributes,f)){g=false}}else{if(!g.collection){g.collection=this}}return g},_removeReference:function(e){if(this===e.collection){delete e.collection}e.off("all",this._onModelEvent,this)},_onModelEvent:function(g,f,h,e){if((g==="add"||g==="remove")&&h!==this){return}if(g==="destroy"){this.remove(f,e)}if(f&&g==="change:objectId"){delete this._byId[f.previous("objectId")];this._byId[f.id]=f}this.trigger.apply(this,arguments)}});var b=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];d._arrayEach(b,function(e){d.Collection.prototype[e]=function(){return c[e].apply(c,[this.models].concat(c.toArray(arguments)))}});d.Collection.extend=d._extend}(this));(function(a){a.NCMB=a.NCMB||{};var b=a.NCMB;b.Installation=b.Object.extend("installation");b.Push=b.Object.extend("push");b.Push.constructor=function(c){this._data=c};b.Push.save=function(e,c){if(!e){if(this._data){e=this._data}else{e={}}}if(e.searchCondition){e.searchCondition=b._encode(e.searchCondition)}if(e.deliveryExpirationDate){e.deliveryExpirationDate=b._encode(e.deliveryExpirationDate)}if(e.deliveryTime){e.deliveryTime=b._encode(e.deliveryTime)}if(e.deliveryExpirationTime){e.deliveryExpirationTime=b._encode(e.deliveryExpirationTime)}if(e.deliveryExpirationDate&&e.deliveryExpirationTime){throw"Both deliveryExpirationDate and deliveryExpirationTime can't be set"}var d=b._request("push",null,null,"POST",e);return d._thenRunCallbacks(c)};b.Push.send=function(e,c){if(e.searchCondition){e.searchCondition=b._encode(e.searchCondition)}if(e.deliveryExpirationDate){e.deliveryExpirationDate=b._encode(e.deliveryExpirationDate)}if(e.deliveryTime){e.deliveryTime=b._encode(e.deliveryTime)}if(e.deliveryExpirationTime){e.deliveryExpirationTime=b._encode(e.deliveryExpirationTime)}if(e.deliveryExpirationDate&&e.deliveryExpirationTime){throw"Both deliveryExpirationDate and deliveryExpirationTime can't be set"}var d=b._request("push",null,null,"POST",e);return d._thenRunCallbacks(c)}}(this));(function(a){a.NCMB=a.NCMB||{};var d=a.NCMB;var c=d._;var b="*";var g=false;var h;var e;var f={authenticate:function(k){var j=this;FB.login(function(l){if(l.authResponse){if(k.success){k.success(j,{id:l.authResponse.userID,access_token:l.authResponse.accessToken,expiration_date:new Date(l.authResponse.expiresIn*1000+(new Date()).getTime()).toJSON()})}}else{if(k.error){k.error(j,l)}}},{scope:h})},restoreAuthentication:function(k){if(k){var j={userID:k.id,accessToken:k.access_token,expiresIn:(d._NCMBDate(k.expiration_date.iso).getTime()-(new Date()).getTime())/1000};var l=c.clone(e);l.authResponse=j;l.status=false;FB.init(l)}return true},getAuthType:function(){return"facebook"},deauthenticate:function(){this.restoreAuthentication(null);FB.logout()}};d.FacebookUtils={init:function(j){if(typeof(FB)==="undefined"){throw"The Facebook JavaScript SDK must be loaded before calling init."}e=c.clone(j)||{};if(e.status&&typeof(console)!=="undefined"){var k=console.warn||console.log||function(){}}e.status=false;FB.init(e);d.User._registerAuthenticationProvider(f);g=true},isLinked:function(j){return j._isLinked("facebook")},logIn:function(k,j){if(!k||c.isString(k)){if(!g){throw"You must initialize FacebookUtils before calling logIn."}h=k;return d.User._logInWith("facebook",j)}else{var l=c.clone(j)||{};l.authData=k;return d.User._logInWith("facebook",l)}},link:function(j,l,k){if(!l||c.isString(l)){if(!g){throw"You must initialize FacebookUtils before calling link."}h=l;return j._linkWith("facebook",k)}else{var m=c.clone(k)||{};m.authData=l;return j._linkWith("facebook",m)}},unlink:function(j,k){if(!g){throw"You must initialize FacebookUtils before calling unlink."}return j._unlinkFrom("facebook",k)}}}(this));(function(a){a.NCMB=a.NCMB||{};var e=a.NCMB;var d=e._;e.View=function(f){this.cid=d.uniqueId("view");this._configure(f||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var c=/^(\S+)\s*(.*)$/;var b=["model","collection","el","id","attributes","className","tagName"];d.extend(e.View.prototype,e.Events,{tagName:"div",$:function(f){return this.$el.find(f)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(g,f,j){var h=document.createElement(g);if(f){e.$(h).attr(f)}if(j){e.$(h).html(j)}return h},setElement:function(f,g){this.$el=e.$(f);this.el=this.$el[0];if(g!==false){this.delegateEvents()}return this},delegateEvents:function(g){g=g||e._getValue(this,"events");if(!g){return}this.undelegateEvents();var f=this;e._objectEach(g,function(m,l){if(!d.isFunction(m)){m=f[g[l]]}if(!m){throw new Error('Event "'+g[l]+'" does not exist')}var k=l.match(c);var j=k[1],h=k[2];m=d.bind(m,f);j+=".delegateEvents"+f.cid;if(h===""){f.$el.bind(j,m)}else{f.$el.delegate(h,j,m)}})},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(g){if(this.options){g=d.extend({},this.options,g)}var f=this;d.each(b,function(h){if(g[h]){f[h]=g[h]}});this.options=g},_ensureElement:function(){if(!this.el){var f=e._getValue(this,"attributes")||{};if(this.id){f.id=this.id}if(this.className){f["class"]=this.className}this.setElement(this.make(this.tagName,f),false)}else{this.setElement(this.el,false)}}});e.View.extend=e._extend}(this));(function(b){b.NCMB=b.NCMB||{};var d=b.NCMB;var c=d._;d.Router=function(g){g=g||{};if(g.routes){this.routes=g.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var e=/:\w+/g;var f=/\*\w+/g;var a=/[\-\[\]{}()+?.,\\\^\$\|#\s]/g;c.extend(d.Router.prototype,d.Events,{initialize:function(){},route:function(g,h,j){d.history=d.history||new d.History();if(!c.isRegExp(g)){g=this._routeToRegExp(g)}if(!j){j=this[h]}d.history.route(g,c.bind(function(l){var k=this._extractParameters(g,l);if(j){j.apply(this,k)}this.trigger.apply(this,["route:"+h].concat(k));d.history.trigger("route",this,h,k)},this));return this},navigate:function(h,g){d.history.navigate(h,g)},_bindRoutes:function(){if(!this.routes){return}var h=[];for(var j in this.routes){if(this.routes.hasOwnProperty(j)){h.unshift([j,this.routes[j]])}}for(var k=0,g=h.length;k<g;k++){this.route(h[k][0],h[k][1],this[h[k][1]])}},_routeToRegExp:function(g){g=g.replace(a,"\\$&").replace(e,"([^/]+)").replace(f,"(.*?)");return new RegExp("^"+g+"$")},_extractParameters:function(g,h){return g.exec(h).slice(1)}});d.Router.extend=d._extend}(this));(function(a){a.NCMB=a.NCMB||{};var d=a.NCMB;var c=d._;d.History=function(){this.handlers=[];c.bindAll(this,"checkUrl")};var e=/^[#\/]/;var b=/msie [\w.]+/;d.History.started=false;c.extend(d.History.prototype,d.Events,{interval:50,getHash:function(h){var g=h?h.location:window.location;var f=g.href.match(/#(.*)$/);return f?f[1]:""},getFragment:function(g,f){if(d._isNullOrUndefined(g)){if(this._hasPushState||f){g=window.location.pathname;var h=window.location.search;if(h){g+=h}}else{g=this.getHash()}}if(!g.indexOf(this.options.root)){g=g.substr(this.options.root.length)}return g.replace(e,"")},start:function(h){if(d.History.started){throw new Error("NCMB.history has already been started")}d.History.started=true;this.options=c.extend({},{root:"/"},this.options,h);this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var g=this.getFragment();var f=document.documentMode;var k=(b.exec(navigator.userAgent.toLowerCase())&&(!f||f<=7));if(k){this.iframe=d.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(g)}if(this._hasPushState){d.$(window).bind("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!k){d.$(window).bind("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=window.setInterval(this.checkUrl,this.interval)}}}this.fragment=g;var l=window.location;var j=l.pathname===this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!j){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&j&&l.hash){this.fragment=this.getHash().replace(e,"");window.history.replaceState({},document.title,l.protocol+"//"+l.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},stop:function(){d.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);window.clearInterval(this._checkUrlInterval);d.History.started=false},route:function(f,g){this.handlers.unshift({route:f,callback:g})},checkUrl:function(g){var f=this.getFragment();if(f===this.fragment&&this.iframe){f=this.getFragment(this.getHash(this.iframe))}if(f===this.fragment){return false}if(this.iframe){this.navigate(f)}if(!this.loadUrl()){this.loadUrl(this.getHash())}},loadUrl:function(h){var g=this.fragment=this.getFragment(h);var f=c.any(this.handlers,function(j){if(j.route.test(g)){j.callback(g);return true}});return f},navigate:function(h,g){if(!d.History.started){return false}if(!g||g===true){g={trigger:g}}var j=(h||"").replace(e,"");if(this.fragment===j){return}if(this._hasPushState){if(j.indexOf(this.options.root)!==0){j=this.options.root+j}this.fragment=j;var f=g.replace?"replaceState":"pushState";window.history[f]({},document.title,j)}else{if(this._wantsHashChange){this.fragment=j;this._updateHash(window.location,j,g.replace);if(this.iframe&&(j!==this.getFragment(this.getHash(this.iframe)))){if(!g.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,j,g.replace)}}else{window.location.assign(this.options.root+h)}}if(g.trigger){this.loadUrl(h)}},_updateHash:function(f,g,h){if(h){var j=f.toString().replace(/(javascript:|#).*$/,"");f.replace(j+"#"+g)}else{f.hash=g}}})}(this));(function(a){a.NCMB=a.NCMB||{};var c=a.NCMB;var b=c._;c.GeoPoint=function(e,d){if(b.isArray(e)){c.GeoPoint._validate(e[0],e[1]);this.latitude=e[0];this.longitude=e[1]}else{if(b.isObject(e)){c.GeoPoint._validate(e.latitude,e.longitude);this.latitude=e.latitude;this.longitude=e.longitude}else{if(b.isNumber(e)&&b.isNumber(d)){c.GeoPoint._validate(e,d);this.latitude=e;this.longitude=d}else{this.latitude=0;this.longitude=0}}}};c.GeoPoint._validate=function(e,d){if(e<-90){throw"NCMB.GeoPoint latitude "+e+" < -90.0."}if(e>90){throw"NCMB.GeoPoint latitude "+e+" > 90.0."}if(d<-180){throw"NCMB.GeoPoint longitude "+d+" < -180.0."}if(d>180){throw"NCMB.GeoPoint longitude "+d+" > 180.0."}};c.GeoPoint.current=function(d){var e=new c.Promise();navigator.geolocation.getCurrentPosition(function(f){e.resolve(new c.GeoPoint({latitude:f.coords.latitude,longitude:f.coords.longitude}))},function(f){e.reject(f)});return e._thenRunCallbacks(d)};c.GeoPoint.prototype={toJSON:function(){c.GeoPoint._validate(this.latitude,this.longitude);return{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}}}}(this));